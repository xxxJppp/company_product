/** layui-v2.2.45 MIT License By http://www.layui.com */layui.define(["laytpl","laypage","layer","form"],function(B){var h=layui.$,r=layui.laytpl,C=layui.laypage,p=layui.layer,D=layui.form,v=layui.hint(),A=layui.device(),k={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1E4:0,set:function(a){return this.config=h.extend({},this.config,a),this},on:function(a,b){return layui.onevent.call(this,t,a,b)}},w=function(){var a=this,b=a.config,f=b.id;return f&&(w.config[f]=b),{reload:function(b){a.reload.call(a,b)},config:b}},t="table",z=function(a){return a=a||{},['\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" class\x3d"layui-table" {{# if(d.data.skin){ }}lay-skin\x3d"{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size\x3d"{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}\x3e\x3cthead\x3e{{# layui.each(d.data.cols, function(i1, item1){ }}\x3ctr\x3e{{# layui.each(item1, function(i2, item2){ }}{{# if(item2.fixed \x26\x26 item2.fixed !\x3d\x3d "right"){ left \x3d true; } }}{{# if(item2.fixed \x3d\x3d\x3d "right"){ right \x3d true; } }}',a.fixed&&"right"!==a.fixed?'{{# if(item2.fixed \x26\x26 item2.fixed !\x3d\x3d "right"){ }}':"right"===a.fixed?'{{# if(item2.fixed \x3d\x3d\x3d "right"){ }}':"",'\x3cth data-field\x3d"{{ item2.field||i2 }}" {{# if(item2.minWidth){ }}data-minwidth\x3d"{{item2.minWidth}}"{{# } }} {{#if(item2.colspan){}} colspan\x3d"{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan\x3d"{{item2.rowspan}}"{{#}}} {{# if(item2.unresize){ }}data-unresize\x3d"true"{{# } }}\x3e\x3cdiv class\x3d"layui-table-cell laytable-cell-{{# if(item2.colspan \x3e 1){ }}group{{# } else { }}{{d.index}}-{{item2.field || i2}}{{# if(item2.type !\x3d\x3d "normal"){ }} laytable-cell-{{ item2.type }}{{# } }}{{# } }}" {{#if(item2.align){}}align\x3d"{{item2.align}}"{{#}}}\x3e{{# if(item2.type \x3d\x3d\x3d "checkbox"){ }}\x3cinput type\x3d"checkbox" name\x3d"layTableCheckbox" lay-skin\x3d"primary" lay-filter\x3d"layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}\x3e{{# } else { }}\x3cspan\x3e{{item2.title||""}}\x3c/span\x3e{{# if(!(item2.colspan \x3e 1) \x26\x26 item2.sort){ }}\x3cspan class\x3d"layui-table-sort layui-inline"\x3e\x3ci class\x3d"layui-edge layui-table-sort-asc"\x3e\x3c/i\x3e\x3ci class\x3d"layui-edge layui-table-sort-desc"\x3e\x3c/i\x3e\x3c/span\x3e{{# } }}{{# } }}\x3c/div\x3e\x3c/th\x3e',a.fixed?"{{# }; }}":"","{{# }); }}\x3c/tr\x3e{{# }); }}\x3c/thead\x3e\x3c/table\x3e"].join("")},E=['\x3cdiv class\x3d"layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter\x3d"LAY-table-{{d.index}}" style\x3d"{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}"\x3e{{# if(d.data.toolbar){ }}\x3cdiv class\x3d"layui-table-tool"\x3e\x3c/div\x3e{{# } }}\x3cdiv class\x3d"layui-table-box"\x3e{{# var left, right; }}\x3cdiv class\x3d"layui-table-header"\x3e',z(),'\x3c/div\x3e\x3cdiv class\x3d"layui-table-body layui-table-main"\x3e\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" class\x3d"layui-table" {{# if(d.data.skin){ }}lay-skin\x3d"{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size\x3d"{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e{{# if(left){ }}\x3cdiv class\x3d"layui-table-fixed layui-table-fixed-l"\x3e\x3cdiv class\x3d"layui-table-header"\x3e',z({fixed:!0}),'\x3c/div\x3e\x3cdiv class\x3d"layui-table-body"\x3e\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" class\x3d"layui-table" {{# if(d.data.skin){ }}lay-skin\x3d"{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size\x3d"{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e{{# }; }}{{# if(right){ }}\x3cdiv class\x3d"layui-table-fixed layui-table-fixed-r"\x3e\x3cdiv class\x3d"layui-table-header"\x3e',z({fixed:"right"}),'\x3cdiv class\x3d"layui-table-mend"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"layui-table-body"\x3e\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" class\x3d"layui-table" {{# if(d.data.skin){ }}lay-skin\x3d"{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size\x3d"{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e{{# }; }}\x3c/div\x3e{{# if(d.data.page){ }}\x3cdiv class\x3d"layui-table-page"\x3e\x3cdiv id\x3d"layui-table-page{{d.index}}"\x3e\x3c/div\x3e\x3c/div\x3e{{# } }}\x3cstyle\x3e{{# layui.each(d.data.cols, function(i1, item1){layui.each(item1, function(i2, item2){ }}.laytable-cell-{{d.index}}-{{item2.field||i2}}{ {{# if(item2.width){ }}width: {{item2.width}}px;{{# } }} }{{# });}); }}\x3c/style\x3e\x3c/div\x3e'].join(""),u=h(window),F=h(document),l=function(a){this.index=++k.index;this.config=h.extend({},this.config,k.config,a);this.render()};l.prototype.config={limit:10,loading:!0,cellMinWidth:60,text:{none:"\u65e0\u6570\u636e"}};l.prototype.render=function(){var a=this.config;if(a.elem=h(a.elem),a.where=a.where||{},a.id=a.id||a.elem.attr("id"),a.request=h.extend({pageName:"page",limitName:"limit"},a.request),a.response=h.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},a.response),"object"==typeof a.page&&(a.limit=a.page.limit||a.limit,a.limits=a.page.limits||a.limits,this.page=a.page.curr=a.page.curr||1,delete a.page.elem,delete a.page.jump),!a.elem[0])return this;this.setArea();var b=a.elem,f=b.next(".layui-table-view"),e=this.elem=h(r(E).render({VIEW_CLASS:"layui-table-view",data:a,index:this.index}));if(a.index=this.index,f[0]&&f.remove(),b.after(e),this.layHeader=e.find(".layui-table-header"),this.layMain=e.find(".layui-table-main"),this.layBody=e.find(".layui-table-body"),this.layFixed=e.find(".layui-table-fixed"),this.layFixLeft=e.find(".layui-table-fixed-l"),this.layFixRight=e.find(".layui-table-fixed-r"),this.layTool=e.find(".layui-table-tool"),this.layPage=e.find(".layui-table-page"),this.layTool.html(r(h(a.toolbar).html()||"").render(a)),a.height&&this.fullSize(),1<a.cols.length)a=this.layFixed.find(".layui-table-header").find("th"),a.height(this.layHeader.height()-1-parseFloat(a.css("padding-top"))-parseFloat(a.css("padding-bottom")));this.pullData(this.page);this.events()};l.prototype.initOpts=function(a){var b=(this.config,{checkbox:48,space:15,numbers:40});a.checkbox&&(a.type="checkbox");a.space&&(a.type="space");a.type||(a.type="normal");"normal"!==a.type&&(a.unresize=!0,a.width=a.width||b[a.type])};l.prototype.setArea=function(){var a=this,b=a.config,f=0,e=0,d=0,g=0,h=b.width||function(){var a=function(c){var d,m;c=c||b.elem.parent();d=c.width();try{m="none"===c.css("display")}catch(y){}return!c[0]||d&&!m?d:a(c.parent())};return a()}();a.eachCols(function(){f++});h-="line"===b.skin||"nob"===b.skin?2:f+1;layui.each(b.cols,function(b,d){layui.each(d,function(b,c){var m;return c?(a.initOpts(c),m=c.width||0,void(1<c.colspan||(/\d+%$/.test(m)?c.width=m=Math.floor(parseFloat(m)/100*h):m||(c.width=m=0,e++),g+=m))):void d.splice(b,1)})});a.autoColNums=e;h>g&&e&&(d=(h-g)/e);layui.each(b.cols,function(a,m){layui.each(m,function(a,c){a=c.minWidth||b.cellMinWidth;1<c.colspan||0===c.width&&(c.width=Math.floor(d>=a?d:a))})});b.height&&/^full-\d+$/.test(b.height)&&(a.fullHeightGap=b.height.split("-")[1],b.height=u.height()-a.fullHeightGap)};l.prototype.reload=function(a){this.config.data&&this.config.data.constructor===Array&&delete this.config.data;this.config=h.extend({},this.config,a);this.render()};l.prototype.page=1;l.prototype.pullData=function(a,b){var f=this,e=f.config,d=e.request,g=e.response,k=function(){"object"==typeof e.initSort&&f.sort(e.initSort.field,e.initSort.type)};if(f.startTime=(new Date).getTime(),e.url){var c={};c[d.pageName]=a;c[d.limitName]=e.limit;h.ajax({type:e.method||"get",url:e.url,data:h.extend(c,e.where),dataType:"json",success:function(c){return c[g.statusName]!=g.statusCode?(f.renderForm(),f.layMain.html('\x3cdiv class\x3d"layui-none"\x3e'+(c[g.msgName]||"\u8fd4\u56de\u7684\u6570\u636e\u72b6\u6001\u5f02\u5e38")+"\x3c/div\x3e")):(f.renderData(c,a,c[g.countName]),k(),e.time=(new Date).getTime()-f.startTime+" ms",b&&p.close(b),void("function"==typeof e.done&&e.done(c,a,c[g.countName])))},error:function(a,c){f.layMain.html('\x3cdiv class\x3d"layui-none"\x3e\u6570\u636e\u63a5\u53e3\u8bf7\u6c42\u5f02\u5e38\x3c/div\x3e');f.renderForm();b&&p.close(b)}})}else e.data&&e.data.constructor===Array&&(d={},c=a*e.limit-e.limit,d[g.dataName]=e.data.concat().splice(c,e.limit),d[g.countName]=e.data.length,f.renderData(d,a,e.data.length),k(),"function"==typeof e.done&&e.done(d,a,d[g.countName]))};l.prototype.eachCols=function(a){var b=h.extend(!0,[],this.config.cols),f=[],e=0;layui.each(b,function(a,d){layui.each(d,function(c,d){if(1<d.colspan){var m=0;e++;d.CHILD_COLS=[];layui.each(b[a+1],function(a,c){c.PARENT_COL||m==d.colspan||(c.PARENT_COL=e,d.CHILD_COLS.push(c),m+=1<c.colspan?c.colspan:1)})}d.PARENT_COL||f.push(d)})});var d=function(b){layui.each(b||f,function(b,c){return c.CHILD_COLS?d(c.CHILD_COLS):void a(b,c)})};d()};l.prototype.renderData=function(a,b,f,e){var d=this,g=d.config,n=a[g.response.dataName]||[],c=[],m=[],q=[];a=function(){return!e&&d.sortKey?d.sort(d.sortKey.field,d.sortKey.sort,!0):(layui.each(n,function(a,f){var x=[],n=[],l=[],y=a+g.limit*(b-1)+1;0!==f.length&&(e||(f[k.config.indexName]=a),d.eachCols(function(a,c){var b=c.field||a,e=f[b];d.getColElem(d.layHeader,b);(void 0!==e&&null!==e||(e=""),1<c.colspan)||(a=['\x3ctd data-field\x3d"'+b+'" '+function(){var a=[];return c.edit&&a.push('data-edit\x3d"'+c.edit+'"'),c.align&&a.push('align\x3d"'+c.align+'"'),c.templet&&a.push('data-content\x3d"'+e+'"'),c.toolbar&&a.push('data-off\x3d"true"'),c.event&&a.push('lay-event\x3d"'+c.event+'"'),c.style&&a.push('style\x3d"'+c.style+'"'),c.minWidth&&a.push('data-minwidth\x3d"'+c.minWidth+'"'),a.join(" ")}()+"\x3e",'\x3cdiv class\x3d"layui-table-cell laytable-cell-'+function(){var a=g.index+"-"+b;return"normal"===c.type?a:a+" laytable-cell-"+c.type}()+'"\x3e'+function(){var a=h.extend(!0,{LAY_INDEX:y},f);if("checkbox"===c.type)var b=k.config.checkName,a='\x3cinput type\x3d"checkbox" name\x3d"layTableCheckbox" lay-skin\x3d"primary" '+(c[b]?(f[b]=c[b],c[b]?"checked":""):a[b]?"checked":"")+"\x3e";else a="numbers"===c.type?y:c.toolbar?r(h(c.toolbar).html()||"").render(a):c.templet?"function"==typeof c.templet?c.templet(a):r(h(c.templet).html()||String(e)).render(a):e;return a}(),"\x3c/div\x3e\x3c/td\x3e"].join(""),x.push(a),c.fixed&&"right"!==c.fixed&&n.push(a),"right"===c.fixed&&l.push(a))}),c.push('\x3ctr data-index\x3d"'+a+'"\x3e'+x.join("")+"\x3c/tr\x3e"),m.push('\x3ctr data-index\x3d"'+a+'"\x3e'+n.join("")+"\x3c/tr\x3e"),q.push('\x3ctr data-index\x3d"'+a+'"\x3e'+l.join("")+"\x3c/tr\x3e"))}),d.layBody.scrollTop(0),d.layMain.find(".layui-none").remove(),d.layMain.find("tbody").html(c.join("")),d.layFixLeft.find("tbody").html(m.join("")),d.layFixRight.find("tbody").html(q.join("")),d.renderForm(),d.syncCheckAll(),d.haveInit?d.scrollPatch():setTimeout(function(){d.scrollPatch()},50),d.haveInit=!0,void p.close(d.tipsIndex))};return d.key=g.id||g.index,k.cache[d.key]=n,d.layPage[0===n.length&&1==b?"addClass":"removeClass"]("layui-hide"),e?a():0===n.length?(d.renderForm(),d.layFixed.remove(),d.layMain.find("tbody").html(""),d.layMain.find(".layui-none").remove(),d.layMain.append('\x3cdiv class\x3d"layui-none"\x3e'+g.text.none+"\x3c/div\x3e")):(a(),void(g.page&&(g.page=h.extend({elem:"layui-table-page"+g.index,count:f,limit:g.limit,limits:g.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:"prev page next skip count limit".split(" "),prev:'\x3ci class\x3d"layui-icon"\x3e\x26#xe603;\x3c/i\x3e',next:'\x3ci class\x3d"layui-icon"\x3e\x26#xe602;\x3c/i\x3e',jump:function(a,c){c||(d.page=a.curr,g.limit=a.limit,d.pullData(a.curr,d.loading()))}},g.page),g.page.count=f,C.render(g.page))))};l.prototype.getColElem=function(a,b){var f=this.config;return a.eq(0).find(".laytable-cell-"+(f.index+"-"+b)+":eq(0)")};l.prototype.renderForm=function(a){D.render(a,"LAY-table-"+this.index)};l.prototype.sort=function(a,b,f,e){var d,g,n={},c=this.config,m=c.elem.attr("lay-filter"),q=k.cache[this.key];"string"==typeof a&&this.layHeader.find("th").each(function(c,b){c=h(this);b=c.data("field");if(b===a)return a=c,d=b,!1});try{d=d||a.data("field");if(this.sortKey&&!f&&d===this.sortKey.field&&b===this.sortKey.sort)return;var x=this.layHeader.find("th .laytable-cell-"+c.index+"-"+d).find(".layui-table-sort");this.layHeader.find("th").find(".layui-table-sort").removeAttr("lay-sort");x.attr("lay-sort",b||null);this.layFixed.find("th")}catch(y){return v.error("Table modules: Did not match to field")}this.sortKey={field:d,sort:b};"asc"===b?g=layui.sort(q,d):"desc"===b?g=layui.sort(q,d,!0):(g=layui.sort(q,k.config.indexName),delete this.sortKey);n[c.response.dataName]=g;this.renderData(n,this.page,this.count,!0);e&&layui.event.call(a,t,"sort("+m+")",{field:d,type:b})};l.prototype.loading=function(){var a=this.config;if(a.loading&&a.url)return p.msg("\u6570\u636e\u8bf7\u6c42\u4e2d",{icon:16,offset:[this.elem.offset().top+this.elem.height()/2-35-u.scrollTop()+"px",this.elem.offset().left+this.elem.width()/2-90-u.scrollLeft()+"px"],time:-1,anim:-1,fixed:!1})};l.prototype.setCheckData=function(a,b){var f=this.config,e=k.cache[this.key];e[a]&&e[a].constructor!==Array&&(e[a][f.checkName]=b)};l.prototype.syncCheckAll=function(){var a=this,b=a.config,f=a.layHeader.find('input[name\x3d"layTableCheckbox"]'),e=function(d){return a.eachCols(function(a,e){"checkbox"===e.type&&(e[b.checkName]=d)}),d};f[0]&&(k.checkStatus(a.key).isAll?(f[0].checked||(f.prop("checked",!0),a.renderForm("checkbox")),e(!0)):(f[0].checked&&(f.prop("checked",!1),a.renderForm("checkbox")),e(!1)))};l.prototype.getCssRule=function(a,b){var f=this,e=f.elem.find("style")[0],e=e.sheet||e.styleSheet||{};layui.each(e.cssRules||e.rules,function(d,e){if(e.selectorText===".laytable-cell-"+f.index+"-"+a)return b(e),!0})};l.prototype.fullSize=function(){var a,b=this.config;a=b.height;this.fullHeightGap&&(a=u.height()-this.fullHeightGap,135>a&&(a=135),this.elem.css("height",a));a=parseFloat(a)-parseFloat(this.layHeader.height())-1;b.toolbar&&(a-=this.layTool.outerHeight());b.page&&(a=a-this.layPage.outerHeight()-1);this.layMain.css("height",a)};l.prototype.getScrollWidth=function(a){var b=0;return a?b=a.offsetWidth-a.clientWidth:(a=document.createElement("div"),a.style.width="100px",a.style.height="100px",a.style.overflowY="scroll",document.body.appendChild(a),b=a.offsetWidth-a.clientWidth,document.body.removeChild(a)),b};l.prototype.scrollPatch=function(){var a=this,b=a.layMain.children("table"),f=a.layMain.width()-a.layMain.prop("clientWidth"),e=a.layMain.height()-a.layMain.prop("clientHeight"),d=a.getScrollWidth(a.layMain[0]),g=b.outerWidth()-a.layMain.width();if(a.autoColNums&&5>g&&!a.scrollPatchWStatus){var k=a.layHeader.eq(0).find("thead th:last-child"),c=k.data("field");a.getCssRule(c,function(c){var b=c.style.width||k.outerWidth();c.style.width=parseFloat(b)-d-g+"px";0<a.layMain.height()-a.layMain.prop("clientHeight")&&(c.style.width=parseFloat(c.style.width)-1+"px");a.scrollPatchWStatus=!0})}f&&e?a.elem.find(".layui-table-patch")[0]||(c=h('\x3cth class\x3d"layui-table-patch"\x3e\x3cdiv class\x3d"layui-table-cell"\x3e\x3c/div\x3e\x3c/th\x3e'),c.find("div").css({width:f}),a.layHeader.eq(0).find("thead tr").append(c)):a.layHeader.eq(0).find(".layui-table-patch").remove();e=a.layMain.height()-e;a.layFixed.find(".layui-table-body").css("height",b.height()>e?e:"auto");a.layFixRight[0<g?"removeClass":"addClass"]("layui-hide");a.layFixRight.css("right",f-1)};l.prototype.events=function(){var a,b=this,f=b.config,e=h("body"),d={},g=b.layHeader.find("th"),l=f.elem.attr("lay-filter");g.on("mousemove",function(a){var c=h(this),b=c.offset().left;a=a.clientX-b;1<c.attr("colspan")||c.data("unresize")||d.resizeStart||(d.allowResize=10>=c.width()-a,e.css("cursor",d.allowResize?"col-resize":""))}).on("mouseleave",function(){h(this);d.resizeStart||e.css("cursor","")}).on("mousedown",function(a){var c=h(this);if(d.allowResize){var e=c.data("field");a.preventDefault();d.resizeStart=!0;d.offset=[a.clientX,a.clientY];b.getCssRule(e,function(a){var b=a.style.width||c.outerWidth();d.rule=a;d.ruleWidth=parseFloat(b);d.minWidth=c.data("minwidth")||f.cellMinWidth})}});F.on("mousemove",function(c){if(d.resizeStart){if(c.preventDefault(),d.rule)c=d.ruleWidth+c.clientX-d.offset[0],c<d.minWidth&&(c=d.minWidth),d.rule.style.width=c+"px",p.close(b.tipsIndex);a=1}}).on("mouseup",function(c){d.resizeStart&&(d={},e.css("cursor",""),b.scrollPatch());2===a&&(a=null)});g.on("click",function(){var c,d=h(this),e=d.find(".layui-table-sort"),f=e.attr("lay-sort");return e[0]&&1!==a?(c="asc"===f?"desc":"desc"===f?null:"asc",void b.sort(d,c,null,!0)):a=2}).find(".layui-table-sort .layui-edge ").on("click",function(a){var c=h(this),d=c.index(),c=c.parents("th").eq(0).data("field");layui.stope(a);0===d?b.sort(c,"asc",null,!0):b.sort(c,"desc",null,!0)});b.elem.on("click",'input[name\x3d"layTableCheckbox"]+',function(){var a=h(this).prev(),d=b.layBody.find('input[name\x3d"layTableCheckbox"]'),e=a.parents("tr").eq(0).data("index"),f=a[0].checked;(a="layTableAllChoose"===a.attr("lay-filter"))?(d.each(function(a,c){c.checked=f;b.setCheckData(a,f)}),b.syncCheckAll(),b.renderForm("checkbox")):(b.setCheckData(e,f),b.syncCheckAll());layui.event.call(this,t,"checkbox("+l+")",{checked:f,data:k.cache[b.key]?k.cache[b.key][e]||{}:{},type:a?"all":"one"})});b.layBody.on("mouseenter","tr",function(){var a=h(this).index();b.layBody.find("tr:eq("+a+")").addClass("layui-table-hover")}).on("mouseleave","tr",function(){var a=h(this).index();b.layBody.find("tr:eq("+a+")").removeClass("layui-table-hover")});b.layBody.on("change",".layui-table-edit",function(){var a=h(this),d=this.value,e=a.parent().data("field"),a=a.parents("tr").eq(0).data("index"),a=k.cache[b.key][a];a[e]=d;layui.event.call(this,t,"edit("+l+")",{value:d,data:a,field:e})}).on("blur",".layui-table-edit",function(){var a,d=h(this),e=d.parent().data("field"),f=d.parents("tr").eq(0).data("index"),f=k.cache[b.key][f];b.eachCols(function(c,b){b.field==e&&b.templet&&(a=b.templet)});d.siblings(".layui-table-cell").html(a?r(h(a).html()||this.value).render(f):this.value);d.parent().data("content",this.value);d.remove()});b.layBody.on("click","td",function(){var a=h(this),d=(a.data("field"),a.data("edit")),e=a.children(".layui-table-cell");(p.close(b.tipsIndex),a.data("off"))||(d?"select"!==d&&(d=h('\x3cinput class\x3d"layui-input layui-table-edit"\x3e'),d[0].value=a.data("content")||e.text(),a.find(".layui-table-edit")[0]||a.append(d),d.focus()):e.find(".layui-form-switch,.layui-form-checkbox")[0]||Math.round(e.prop("scrollWidth"))>Math.round(e.outerWidth())&&(b.tipsIndex=p.tips(['\x3cdiv class\x3d"layui-table-tips-main" style\x3d"margin-top: -'+(e.height()+16)+"px;"+("sm"===f.size?"padding: 4px 15px; font-size: 12px;":"lg"===f.size?"padding: 14px 15px;":"")+'"\x3e',e.html(),'\x3c/div\x3e\x3ci class\x3d"layui-icon layui-table-tips-c"\x3e\x26#x1006;\x3c/i\x3e'].join(""),e[0],{tips:[3,""],time:-1,anim:-1,maxWidth:A.ios||A.android?300:600,isOutAnim:!1,skin:"layui-table-tips",success:function(a,c){a.find(".layui-table-tips-c").on("click",function(){p.close(c)})}})))});b.layBody.on("click","*[lay-event]",function(){var a=h(this),d=a.parents("tr").eq(0).data("index"),e=b.layBody.find('tr[data-index\x3d"'+d+'"]'),f=k.cache[b.key][d];layui.event.call(this,t,"tool("+l+")",{data:k.clearCacheKey(f),event:a.attr("lay-event"),tr:e,del:function(){k.cache[b.key][d]=[];e.remove();b.scrollPatch()},update:function(a){a=a||{};layui.each(a,function(a,c){if(a in f){var d,g=e.children('td[data-field\x3d"'+a+'"]');f[a]=c;b.eachCols(function(c,b){b.field==a&&b.templet&&(d=b.templet)});g.children(".layui-table-cell").html(d?r(h(d).html()||c).render(f):c);g.data("content",c)}})}});e.addClass("layui-table-click").siblings("tr").removeClass("layui-table-click")});b.layMain.on("scroll",function(){var a=h(this),d=a.scrollLeft(),a=a.scrollTop();b.layHeader.scrollLeft(d);b.layFixed.find(".layui-table-body").scrollTop(a);p.close(b.tipsIndex)});u.on("resize",function(){b.fullSize();b.scrollPatch()})};k.init=function(a,b){b=b||{};return h(a?'table[lay-filter\x3d"'+a+'"]':".layui-table[lay-data]").each(function(){var f=h(this),e=f.attr("lay-data");try{e=(new Function("return "+e))()}catch(n){v.error("Table element property lay-data configuration item has a syntax error: "+e)}var d=[],g=h.extend({elem:this,cols:[],data:[],skin:f.attr("lay-skin"),size:f.attr("lay-size"),even:"string"==typeof f.attr("lay-even")},k.config,b,e);a&&f.hide();f.find("thead\x3etr").each(function(a){g.cols[a]=[];h(this).children().each(function(b){b=h(this);var c=b.attr("lay-data");try{c=(new Function("return "+c))()}catch(q){return v.error("Table element property lay-data configuration item has a syntax error: "+c)}b=h.extend({title:b.text(),colspan:b.attr("colspan")||0,rowspan:b.attr("rowspan")||0},c);2>b.colspan&&d.push(b);g.cols[a].push(b)})});f.find("tbody\x3etr").each(function(a){var b=h(this),e={};b.children("td").each(function(a,b){a=h(this);if(b=a.data("field"))return e[b]=a.html()});layui.each(d,function(a,c){a=b.children("td").eq(a);e[c.field]=a.html()});g.data[a]=e});k.render(g)}),this};k.checkStatus=function(a){var b=0,f=0,e=[];a=k.cache[a]||[];return layui.each(a,function(a,g){return g.constructor===Array?void f++:void(g[k.config.checkName]&&(b++,e.push(k.clearCacheKey(g))))}),{data:e,isAll:!!a.length&&b===a.length-f}};w.config={};k.reload=function(a,b){a=w.config[a];return b=b||{},a?(b.data&&b.data.constructor===Array&&delete a.data,k.render(h.extend(!0,{},a,b))):v.error("The ID option was not found in the table instance")};k.render=function(a){a=new l(a);return w.call(a)};k.clearCacheKey=function(a){return a=h.extend({},a),delete a[k.config.checkName],delete a[k.config.indexName],a};k.init();B(t,k)});