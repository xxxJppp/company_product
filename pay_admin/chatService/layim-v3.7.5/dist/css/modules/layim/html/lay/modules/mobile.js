/** layui-v2.2.45 MIT License By http://www.layui.com */layui.define(function(A){A("layui.mobile",layui.v)});layui.define(function(A){var g={open:"{{",close:"}}"},b={exp:function(b){return new RegExp(b,"g")},query:function(b,p,m){return e((p||"")+g.open+["#([\\s\\S])+?","([^{#}])*?"][b||0]+g.close+(m||""))},escape:function(b){return String(b||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/'/g,"\x26#39;").replace(/"/g,"\x26quot;")},error:function(b,e){return"object"==typeof console&&console.error("Laytpl Error\uff1a"+b+"\n"+(e||"")),"Laytpl Error\uff1a"+b}},e=b.exp,y=function(b){this.tpl=b};y.pt=y.prototype;window.errors=0;y.pt.parse=function(l,p){var m=l,z=e("^"+g.open+"#",""),y=e(g.close+"$","");l=l.replace(/\s+|\r|\t|\n/g," ").replace(e(g.open+"#"),g.open+"# ").replace(e(g.close+"}"),"} "+g.close).replace(/\\/g,"\\\\").replace(e(g.open+"!(.+?)!"+g.close),function(b){return b=b.replace(e("^"+g.open+"!"),"").replace(e("!"+g.close),"").replace(e(g.open+"|"+g.close),function(b){return b.replace(/(.)/g,"\\$1")})}).replace(/(?="|')/g,"\\").replace(b.query(),function(b){return b=b.replace(z,"").replace(y,""),'";'+b.replace(/\\/g,"")+';view+\x3d"'}).replace(b.query(1),function(b){var m='"+(';return b.replace(/\s/g,"")===g.open+g.close?"":(b=b.replace(e(g.open+"|"+g.close),""),/^=/.test(b)&&(b=b.replace(/^=/,""),m='"+_escape_('),m+b.replace(/\\/g,"")+')+"')});l='"use strict";var view \x3d "'+l+'";return view;';try{return this.cache=l=new Function("d, _escape_",l),l(p,b.escape)}catch(D){return delete this.cache,b.error(D,m)}};y.pt.render=function(e,p){var m;return e?(m=this.cache?this.cache(e,b.escape):this.parse(this.tpl,e),p?void p(m):m):b.error("no data")};var u=function(e){return"string"!=typeof e?b.error("Template not found"):new y(e)};u.config=function(b){b=b||{};for(var e in b)g[e]=b[e]};u.v="1.2.0";A("laytpl",u)});layui.define(function(A){var g=(window,document),b={type:0,shade:!0,shadeClose:!0,fixed:!0,anim:"scale"},e={extend:function(m){var e=JSON.parse(JSON.stringify(b)),g;for(g in m)e[g]=m[g];return e},timer:{},end:{},touch:function(b,e){b.addEventListener("click",function(b){e.call(this,b)},!1)}},y=0,u=["layui-m-layer"],l=function(b){this.config=e.extend(b);this.view()};l.prototype.view=function(){var b=this.config,e=g.createElement("div");this.id=e.id=u[0]+y;e.setAttribute("class",u[0]+" "+u[0]+(b.type||0));e.setAttribute("index",y);var l=function(){var e="object"==typeof b.title;return b.title?'\x3ch3 style\x3d"'+(e?b.title[1]:"")+'"\x3e'+(e?b.title[0]:b.title)+"\x3c/h3\x3e":""}(),D=function(){"string"==typeof b.btn&&(b.btn=[b.btn]);var e,g=(b.btn||[]).length;return 0!==g&&b.btn?(e='\x3cspan yes type\x3d"1"\x3e'+b.btn[0]+"\x3c/span\x3e",2===g&&(e='\x3cspan no type\x3d"0"\x3e'+b.btn[1]+"\x3c/span\x3e"+e),'\x3cdiv class\x3d"layui-m-layerbtn"\x3e'+e+"\x3c/div\x3e"):""}();(b.fixed||(b.top=b.hasOwnProperty("top")?b.top:100,b.style=b.style||"",b.style+=" top:"+(g.body.scrollTop+b.top)+"px"),2===b.type&&(b.content='\x3ci\x3e\x3c/i\x3e\x3ci class\x3d"layui-m-layerload"\x3e\x3c/i\x3e\x3ci\x3e\x3c/i\x3e\x3cp\x3e'+(b.content||"")+"\x3c/p\x3e"),b.skin&&(b.anim="up"),"msg"===b.skin&&(b.shade=!1),e.innerHTML=(b.shade?"\x3cdiv "+("string"==typeof b.shade?'style\x3d"'+b.shade+'"':"")+' class\x3d"layui-m-layershade"\x3e\x3c/div\x3e':"")+'\x3cdiv class\x3d"layui-m-layermain" '+(b.fixed?"":'style\x3d"position:static;"')+'\x3e\x3cdiv class\x3d"layui-m-layersection"\x3e\x3cdiv class\x3d"layui-m-layerchild '+(b.skin?"layui-m-layer-"+b.skin+" ":"")+(b.className?b.className:"")+" "+(b.anim?"layui-m-anim-"+b.anim:"")+'" '+(b.style?'style\x3d"'+b.style+'"':"")+"\x3e"+l+'\x3cdiv class\x3d"layui-m-layercont"\x3e'+b.content+"\x3c/div\x3e"+D+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",b.type&&2!==b.type)||(l=g.getElementsByClassName(u[0]+b.type),1<=l.length&&p.close(l[0].getAttribute("index")));document.body.appendChild(e);e=this.elem=g.querySelectorAll("#"+this.id)[0];b.success&&b.success(e);this.index=y++;this.action(b,e)};l.prototype.action=function(b,g){var m=this;b.time&&(e.timer[m.index]=setTimeout(function(){p.close(m.index)},1E3*b.time));var l=function(){0==this.getAttribute("type")?(b.no&&b.no(),p.close(m.index)):b.yes?b.yes(m.index):p.close(m.index)};if(b.btn)for(var y=g.getElementsByClassName("layui-m-layerbtn")[0].children,z=y.length,u=0;u<z;u++)e.touch(y[u],l);b.shade&&b.shadeClose&&(g=g.getElementsByClassName("layui-m-layershade")[0],e.touch(g,function(){p.close(m.index,b.end)}));b.end&&(e.end[m.index]=b.end)};var p={v:"2.0 m",index:y,open:function(b){return(new l(b||{})).index},close:function(b){var p=g.querySelectorAll("#"+u[0]+b)[0];p&&(p.innerHTML="",g.body.removeChild(p),clearTimeout(e.timer[b]),delete e.timer[b],"function"==typeof e.end[b]&&e.end[b](),delete e.end[b])},closeAll:function(){for(var b=g.getElementsByClassName(u[0]),e=0,l=b.length;e<l;e++)p.close(0|b[0].getAttribute("index"))}};A("layer-mobile",p)});layui.define(function(A){var g=function(){function b(f){return null==f?String(f):Y[ca.call(f)]||"object"}function e(f){return"function"==b(f)}function g(f){return null!=f&&f==f.window}function u(f){return"object"==b(f)}function l(f){return u(f)&&!g(f)&&Object.getPrototypeOf(f)==Object.prototype}function p(f){var a=!!f&&"length"in f&&f.length,b=d.type(f);return"function"!=b&&!g(f)&&("array"==b||0===a||"number"==typeof a&&0<a&&a-1 in f)}function m(f){return r.call(f,function(f){return null!=f})}function z(f){return f.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function L(f){return f in T?T[f]:T[f]=new RegExp("(^|\\s)"+f+"(\\s|$)")}function D(f,a){return"number"!=typeof a||U[z(f)]?a:a+"px"}function Q(f){return"children"in f?H.call(f.children):d.map(f.childNodes,function(f){if(1==f.nodeType)return f})}function E(f,a){var b,G=f?f.length:0;for(b=0;b<G;b++)this[b]=f[b];this.length=G;this.selector=a||""}function F(f,a,b){for(v in a)b&&(l(a[v])||S(a[v]))?(l(a[v])&&!l(f[v])&&(f[v]={}),S(a[v])&&!S(f[v])&&(f[v]=[]),F(f[v],a[v],b)):a[v]!==B&&(f[v]=a[v])}function C(f,a){return null==a?d(f):d(f).filter(a)}function k(f,a,b,c){return e(a)?a.call(f,b,c):a}function J(f,a){var b=f.className||"",G=b&&b.baseVal!==B;return a===B?G?b.baseVal:b:void(G?b.baseVal=a:f.className=a)}function O(f){try{return f?"true"==f||"false"!=f&&("null"==f?null:+f+""==f?+f:/^[\[\{]/.test(f)?d.parseJSON(f):f):f}catch(G){return f}}function A(f,a){a(f);for(var b=0,G=f.childNodes.length;b<G;b++)A(f.childNodes[b],a)}var B,v,d,I,N,w,n=[],c=n.concat,r=n.filter,H=n.slice,h=window.document,V={},T={},U={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},W=/^\s*<(\w+|!)[^>]*>/,X=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,t=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,R=/^(?:body|html)$/i,M=/([A-Z])/g,a="val css html text data width height offset".split(" "),K=h.createElement("table"),q=h.createElement("tr"),Z={tr:h.createElement("tbody"),tbody:K,thead:K,tfoot:K,td:q,th:q,"*":h.createElement("div")},da=/complete|loaded|interactive/,ea=/^[\w-]*$/,Y={},ca=Y.toString,x={},aa=h.createElement("div"),ba={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},S=Array.isArray||function(f){return f instanceof Array};return x.matches=function(f,a){if(!a||!f||1!==f.nodeType)return!1;var b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.matchesSelector;if(b)return b.call(f,a);var G,b=f.parentNode,c=!b;return c&&(b=aa).appendChild(f),G=~x.qsa(b,a).indexOf(f),c&&aa.removeChild(f),G},N=function(f){return f.replace(/-+(.)?/g,function(f,a){return a?a.toUpperCase():""})},w=function(f){return r.call(f,function(a,b){return f.indexOf(a)==b})},x.fragment=function(f,b,c){var G,q,K;return X.test(f)&&(G=d(h.createElement(RegExp.$1))),G||(f.replace&&(f=f.replace(t,"\x3c$1\x3e\x3c/$2\x3e")),b===B&&(b=W.test(f)&&RegExp.$1),b in Z||(b="*"),K=Z[b],K.innerHTML=""+f,G=d.each(H.call(K.childNodes),function(){K.removeChild(this)})),l(c)&&(q=d(G),d.each(c,function(f,b){-1<a.indexOf(f)?q[f](b):q.attr(f,b)})),G},x.Z=function(f,a){return new E(f,a)},x.isZ=function(f){return f instanceof x.Z},x.init=function(f,a){if(!f)return x.Z();if("string"==typeof f)if(f=f.trim(),"\x3c"==f[0]&&W.test(f))a=x.fragment(f,RegExp.$1,a),f=null;else{if(a!==B)return d(a).find(f);a=x.qsa(h,f)}else{if(e(f))return d(h).ready(f);if(x.isZ(f))return f;if(S(f))a=m(f);else if(u(f))a=[f],f=null;else if(W.test(f))a=x.fragment(f.trim(),RegExp.$1,a),f=null;else{if(a!==B)return d(a).find(f);a=x.qsa(h,f)}}return x.Z(a,f)},d=function(f,a){return x.init(f,a)},d.extend=function(f){var a,b=H.call(arguments,1);return"boolean"==typeof f&&(a=f,f=b.shift()),b.forEach(function(b){F(f,b,a)}),f},x.qsa=function(f,a){var b,c="#"==a[0],G=!c&&"."==a[0],q=c||G?a.slice(1):a,h=ea.test(q);return f.getElementById&&h&&c?(b=f.getElementById(q))?[b]:[]:1!==f.nodeType&&9!==f.nodeType&&11!==f.nodeType?[]:H.call(h&&!c&&f.getElementsByClassName?G?f.getElementsByClassName(q):f.getElementsByTagName(a):f.querySelectorAll(a))},d.contains=h.documentElement.contains?function(f,a){return f!==a&&f.contains(a)}:function(f,a){for(;a&&(a=a.parentNode);)if(a===f)return!0;return!1},d.type=b,d.isFunction=e,d.isWindow=g,d.isArray=S,d.isPlainObject=l,d.isEmptyObject=function(f){for(var a in f)return!1;return!0},d.isNumeric=function(f){var a=Number(f),b=typeof f;return null!=f&&"boolean"!=b&&("string"!=b||f.length)&&!isNaN(a)&&isFinite(a)||!1},d.inArray=function(a,b,c){return n.indexOf.call(b,a,c)},d.camelCase=N,d.trim=function(a){return null==a?"":String.prototype.trim.call(a)},d.uuid=0,d.support={},d.expr={},d.noop=function(){},d.map=function(a,b){var f,c,q=[];if(p(a))for(c=0;c<a.length;c++)f=b(a[c],c),null!=f&&q.push(f);else for(c in a)f=b(a[c],c),null!=f&&q.push(f);return 0<q.length?d.fn.concat.apply([],q):q},d.each=function(a,b){var f;if(p(a))for(f=0;f<a.length&&!1!==b.call(a[f],f,a[f]);f++);else for(f in a)if(!1===b.call(a[f],f,a[f]))break;return a},d.grep=function(a,b){return r.call(a,b)},window.JSON&&(d.parseJSON=JSON.parse),d.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){Y["[object "+b+"]"]=b.toLowerCase()}),d.fn={constructor:x.Z,length:0,forEach:n.forEach,reduce:n.reduce,push:n.push,sort:n.sort,splice:n.splice,indexOf:n.indexOf,concat:function(){var a,b,q=[];for(a=0;a<arguments.length;a++)b=arguments[a],q[a]=x.isZ(b)?b.toArray():b;return c.apply(x.isZ(this)?this.toArray():this,q)},map:function(a){return d(d.map(this,function(f,b){return a.call(f,b,f)}))},slice:function(){return d(H.apply(this,arguments))},ready:function(a){return da.test(h.readyState)&&h.body?a(d):h.addEventListener("DOMContentLoaded",function(){a(d)},!1),this},get:function(a){return a===B?H.call(this):this[0<=a?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return n.every.call(this,function(f,b){return!1!==a.call(f,b,f)}),this},filter:function(a){return e(a)?this.not(this.not(a)):d(r.call(this,function(f){return x.matches(f,a)}))},add:function(a,b){return d(w(this.concat(d(a,b))))},is:function(a){return 0<this.length&&x.matches(this[0],a)},not:function(a){var f=[];if(e(a)&&a.call!==B)this.each(function(b){a.call(this,b)||f.push(this)});else{var b="string"==typeof a?this.filter(a):p(a)&&e(a.item)?H.call(a):d(a);this.forEach(function(a){0>b.indexOf(a)&&f.push(a)})}return d(f)},has:function(a){return this.filter(function(){return u(a)?d.contains(this,a):d(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!u(a)?a:d(a)},last:function(){var a=this[this.length-1];return a&&!u(a)?a:d(a)},find:function(a){var f=this;return a?"object"==typeof a?d(a).filter(function(){var a=this;return n.some.call(f,function(f){return d.contains(f,a)})}):1==this.length?d(x.qsa(this[0],a)):this.map(function(){return x.qsa(this,a)}):d()},closest:function(a,b){var f=[],c="object"==typeof a&&d(a);return this.each(function(q,h){for(;h&&!(c?0<=c.indexOf(h):x.matches(h,a));)h=h!==b&&!(null!=h&&h.nodeType==h.DOCUMENT_NODE)&&h.parentNode;h&&0>f.indexOf(h)&&f.push(h)}),d(f)},parents:function(a){for(var f=[],b=this;0<b.length;)b=d.map(b,function(a){if((a=a.parentNode)&&(null==a||a.nodeType!=a.DOCUMENT_NODE)&&0>f.indexOf(a))return f.push(a),a});return C(f,a)},parent:function(a){return C(w(this.pluck("parentNode")),a)},children:function(a){return C(this.map(function(){return Q(this)}),a)},contents:function(){return this.map(function(){return this.contentDocument||H.call(this.childNodes)})},siblings:function(a){return C(this.map(function(a,f){return r.call(Q(f.parentNode),function(a){return a!==f})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return d.map(this,function(f){return f[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display="");if("none"==getComputedStyle(this,"").getPropertyValue("display")){var a=this.style,b;b=this.nodeName;var c,q;b=(V[b]||(c=h.createElement(b),h.body.appendChild(c),q=getComputedStyle(c,"").getPropertyValue("display"),c.parentNode.removeChild(c),"none"==q&&(q="block"),V[b]=q),V[b]);a.display=b}})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var f=e(a);if(this[0]&&!f)var b=d(a).get(0),c=b.parentNode||1<this.length;return this.each(function(q){d(this).wrapAll(f?a.call(this,q):c?b.cloneNode(!0):b)})},wrapAll:function(a){if(this[0]){d(this[0]).before(a=d(a));for(var b;(b=a.children()).length;)a=b.first();d(a).append(this)}return this},wrapInner:function(a){var b=e(a);return this.each(function(f){var c=d(this),q=c.contents();f=b?a.call(this,f):a;q.length?q.wrapAll(f):c.append(f)})},unwrap:function(){return this.parent().each(function(){d(this).replaceWith(d(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=d(this);(a===B?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return d(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return d(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(b){var f=this.innerHTML;d(this).empty().append(k(this,a,b,f))}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(b){b=k(this,a,b,this.textContent);this.textContent=null==b?"":""+b}):0 in this?this.pluck("textContent").join(""):null},attr:function(a,b){var f;return"string"!=typeof a||1 in arguments?this.each(function(f){if(1===this.nodeType)if(u(a))for(v in a){var c=v;f=a[v];null==f?this.removeAttribute(c):this.setAttribute(c,f)}else c=a,f=k(this,b,f,this.getAttribute(a)),null==f?this.removeAttribute(c):this.setAttribute(c,f)}):0 in this&&1==this[0].nodeType&&null!=(f=this[0].getAttribute(a))?f:B},removeAttr:function(a){return this.each(function(){1===this.nodeType&&a.split(" ").forEach(function(a){this.removeAttribute(a)},this)})},prop:function(a,b){return a=ba[a]||a,1 in arguments?this.each(function(f){this[a]=k(this,b,f,this[a])}):this[0]&&this[0][a]},removeProp:function(a){return a=ba[a]||a,this.each(function(){delete this[a]})},data:function(a,b){var f="data-"+a.replace(M,"-$1").toLowerCase(),f=1 in arguments?this.attr(f,b):this.attr(f);return null!==f?O(f):B},val:function(a){return 0 in arguments?(null==a&&(a=""),this.each(function(b){this.value=k(this,a,b,this.value)})):this[0]&&(this[0].multiple?d(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(b){var f=d(this);b=k(this,a,b,f.offset());var c=f.offsetParent().offset();b={top:b.top-c.top,left:b.left-c.left};"static"==f.css("position")&&(b.position="relative");f.css(b)});if(!this.length)return null;if(h.documentElement!==this[0]&&!d.contains(h.documentElement,this[0]))return{top:0,left:0};var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(a,c){if(2>arguments.length){var f=this[0];if("string"==typeof a)return f?f.style[N(a)]||getComputedStyle(f,"").getPropertyValue(a):void 0;if(S(a)){if(!f)return;var q={},h=getComputedStyle(f,"");return d.each(a,function(a,b){q[b]=f.style[N(b)]||h.getPropertyValue(b)}),q}}var K="";if("string"==b(a))c||0===c?K=z(a)+":"+D(a,c):this.each(function(){this.style.removeProperty(z(a))});else for(v in a)a[v]||0===a[v]?K+=z(v)+":"+D(v,a[v])+";":this.each(function(){this.style.removeProperty(z(v))});return this.each(function(){this.style.cssText+=";"+K})},index:function(a){return a?this.indexOf(d(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return!!a&&n.some.call(this,function(a){return this.test(J(a))},L(a))},addClass:function(a){return a?this.each(function(b){if("className"in this){I=[];var f=J(this);k(this,a,b,f).split(/\s+/g).forEach(function(a){d(this).hasClass(a)||I.push(a)},this);I.length&&J(this,f+(f?" ":"")+I.join(" "))}}):this},removeClass:function(a){return this.each(function(b){if("className"in this){if(a===B)return J(this,"");I=J(this);k(this,a,b,I).split(/\s+/g).forEach(function(a){I=I.replace(L(a)," ")});J(this,I.trim())}})},toggleClass:function(a,b){return a?this.each(function(f){var c=d(this);k(this,a,f,J(this)).split(/\s+/g).forEach(function(a){(b===B?!c.hasClass(a):b)?c.addClass(a):c.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var b="scrollTop"in this[0];return a===B?b?this[0].scrollTop:this[0].pageYOffset:this.each(b?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var b="scrollLeft"in this[0];return a===B?b?this[0].scrollLeft:this[0].pageXOffset:this.each(b?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),q=R.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(d(a).css("margin-top"))||0,c.left-=parseFloat(d(a).css("margin-left"))||0,q.top+=parseFloat(d(b[0]).css("border-top-width"))||0,q.left+=parseFloat(d(b[0]).css("border-left-width"))||0,{top:c.top-q.top,left:c.left-q.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||h.body;a&&!R.test(a.nodeName)&&"static"==d(a).css("position");)a=a.offsetParent;return a})}},d.fn.detach=d.fn.remove,["width","height"].forEach(function(a){var b=a.replace(/./,function(a){return a[0].toUpperCase()});d.fn[a]=function(f){var c,q=this[0];return f===B?g(q)?q["inner"+b]:null!=q&&q.nodeType==q.DOCUMENT_NODE?q.documentElement["scroll"+b]:(c=this.offset())&&c[a]:this.each(function(b){q=d(this);q.css(a,k(this,f,b,q[a]()))})}}),["after","prepend","before","append"].forEach(function(a,c){var f=c%2;d.fn[a]=function(){var a,q,K=d.map(arguments,function(f){var c=[];return a=b(f),"array"==a?(f.forEach(function(a){return a.nodeType!==B?c.push(a):d.zepto.isZ(a)?c=c.concat(a.get()):void(c=c.concat(x.fragment(a)))}),c):"object"==a||null==f?f:x.fragment(f)}),e=1<this.length;return 1>K.length?this:this.each(function(a,b){q=f?b:b.parentNode;b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null;var w=d.contains(h.documentElement,q);K.forEach(function(a){if(e)a=a.cloneNode(!0);else if(!q)return d(a).remove();q.insertBefore(a,b);w&&A(a,function(a){if(!(null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src)){var b=a.ownerDocument?a.ownerDocument.defaultView:window;b.eval.call(b,a.innerHTML)}})})})};d.fn[f?a+"To":"insert"+(c?"Before":"After")]=function(b){return d(b)[a](this),this}}),x.Z.prototype=E.prototype=d.fn,x.uniq=w,x.deserializeValue=O,d.zepto=x,d}();!function(b){function e(b){return b._zid||(b._zid=Q++)}function g(b,d,c,r){if(d=u(d),d.ns)var w=new RegExp("(?:^| )"+d.ns.replace(" "," .* ?")+"(?: |$)");return(k[e(b)]||[]).filter(function(b){return b&&(!d.e||b.e==d.e)&&(!d.ns||w.test(b.ns))&&(!c||e(b.fn)===e(c))&&(!r||b.sel==r)})}function u(b){b=(""+b).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function l(b){return B[b]||A&&P[b]||b}function p(d,n,c,r,g,h,p){var w=e(d),H=k[w]||(k[w]=[]);n.split(/\s/).forEach(function(e){if("ready"==e)return b(document).ready(c);var w=u(e);w.fn=c;w.sel=g;w.e in B&&(c=function(c){var h=c.relatedTarget;if(!h||h!==this&&!b.contains(this,h))return w.fn.apply(this,arguments)});var n=(w.del=h)||c;w.proxy=function(b){if(b=z(b),!b.isImmediatePropagationStopped()){b.data=r;var c=n.apply(d,b._args==D?[b]:[b].concat(b._args));return!1===c&&(b.preventDefault(),b.stopPropagation()),c}};w.i=H.length;H.push(w);"addEventListener"in d&&d.addEventListener(l(w.e),w.proxy,w.del&&!A&&w.e in P||!!p)})}function m(b,d,c,r,H){var h=e(b);(d||"").split(/\s/).forEach(function(d){g(b,d,c,r).forEach(function(c){delete k[h][c.i];"removeEventListener"in b&&b.removeEventListener(l(c.e),c.proxy,c.del&&!A&&c.e in P||!!H)})})}function z(e,n){return!n&&e.isDefaultPrevented||(n||(n=e),b.each(N,function(b,r){var c=n[b];e[b]=function(){return this[r]=v,c&&c.apply(n,arguments)};e[r]=d}),e.timeStamp||(e.timeStamp=Date.now()),(n.defaultPrevented!==D?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=v)),e}function L(b){var e,c={originalEvent:b};for(e in b)I.test(e)||b[e]===D||(c[e]=b[e]);return z(c,b)}var D,Q=1,E=Array.prototype.slice,F=b.isFunction,C=function(b){return"string"==typeof b},k={},J={},A="onfocusin"in window,P={focus:"focusin",blur:"focusout"},B={mouseenter:"mouseover",mouseleave:"mouseout"};J.click=J.mousedown=J.mouseup=J.mousemove="MouseEvents";b.event={add:p,remove:m};b.proxy=function(d,n){var c=2 in arguments&&E.call(arguments,2);if(F(d)){var r=function(){return d.apply(n,c?c.concat(E.call(arguments)):arguments)};return r._zid=e(d),r}if(C(n))return c?(c.unshift(d[n],d),b.proxy.apply(null,c)):b.proxy(d[n],d);throw new TypeError("expected function");};b.fn.bind=function(b,d,c){return this.on(b,d,c)};b.fn.unbind=function(b,d){return this.off(b,d)};b.fn.one=function(b,d,c,e){return this.on(b,d,c,e,1)};var v=function(){return!0},d=function(){return!1},I=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,N={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};b.fn.delegate=function(b,d,c){return this.on(d,b,c)};b.fn.undelegate=function(b,d,c){return this.off(d,b,c)};b.fn.live=function(d,e){return b(document.body).delegate(this.selector,d,e),this};b.fn.die=function(d,e){return b(document.body).undelegate(this.selector,d,e),this};b.fn.on=function(e,g,c,r,H){var h,k,n=this;return e&&!C(e)?(b.each(e,function(b,d){n.on(b,g,c,d,H)}),n):(C(g)||F(r)||!1===r||(r=c,c=g,g=D),r!==D&&!1!==c||(r=c,c=D),!1===r&&(r=d),n.each(function(d,n){H&&(h=function(b){return m(n,b.type,r),r.apply(this,arguments)});g&&(k=function(c){var d,e=b(c.target).closest(g,n).get(0);if(e&&e!==n)return d=b.extend(L(c),{currentTarget:e,liveFired:n}),(h||r).apply(e,[d].concat(E.call(arguments,1)))});p(n,e,r,c,g,k||h)}))};b.fn.off=function(e,g,c){var r=this;return e&&!C(e)?(b.each(e,function(b,c){r.off(b,g,c)}),r):(C(g)||F(c)||!1===c||(c=g,g=D),!1===c&&(c=d),r.each(function(){m(this,e,c,g)}))};b.fn.trigger=function(e,d){return e=C(e)||b.isPlainObject(e)?b.Event(e):z(e),e._args=d,this.each(function(){e.type in P&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):b(this).triggerHandler(e,d)})};b.fn.triggerHandler=function(e,d){var c,r;return this.each(function(k,h){c=L(C(e)?b.Event(e):e);c._args=d;c.target=h;b.each(g(h,e.type||e),function(b,e){if(r=e.proxy(c),c.isImmediatePropagationStopped())return!1})}),r};"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){b.fn[e]=function(b){return 0 in arguments?this.bind(e,b):this.trigger(e)}});b.Event=function(b,e){C(b)||(e=b,b=e.type);var c=document.createEvent(J[b]||"Events"),d=!0;if(e)for(var g in e)"bubbles"==g?d=!!e[g]:c[g]=e[g];return c.initEvent(b,d,!0),z(c)}}(g);(function(b){function e(c,e,d,h){if(c.global)return c=e||O,d=b.Event(d),b(c).trigger(d,h),!d.isDefaultPrevented()}function g(c){c.global&&0===b.active++&&e(c,null,"ajaxStart")}function u(b,d){var c=d.context;return!1!==d.beforeSend.call(c,b,d)&&!1!==e(d,c,"ajaxBeforeSend",[b,d])&&void e(d,c,"ajaxSend",[b,d])}function l(b,d,g,h){var c=g.context;g.success.call(c,b,"success",d);h&&h.resolveWith(c,[b,"success",d]);e(g,c,"ajaxSuccess",[d,g,b]);m("success",d,g)}function p(b,d,g,h,k){var c=h.context;h.error.call(c,g,d,b);k&&k.rejectWith(c,[g,d,b]);e(h,c,"ajaxError",[g,h,b||d]);m(d,g,h)}function m(c,d,g){var h=g.context;g.complete.call(h,d,c);e(g,h,"ajaxComplete",[d,g]);g.global&&!--b.active&&e(g,null,"ajaxStop")}function z(){}function L(b){return b&&(b=b.split(";",2)[0]),b&&(b==I?"html":b==d?"json":B.test(b)?"script":v.test(b)&&"xml")||"text"}function D(b,d){return""==d?b:(b+"\x26"+d).replace(/[&?]{1,2}/,"?")}function Q(c){c.processData&&c.data&&"string"!=b.type(c.data)&&(c.data=b.param(c.data,c.traditional));!c.data||c.type&&"GET"!=c.type.toUpperCase()&&"jsonp"!=c.dataType||(c.url=D(c.url,c.data),c.data=void 0)}function E(c,d,e,h){return b.isFunction(d)&&(h=e,e=d,d=void 0),b.isFunction(e)||(h=e,e=void 0),{url:c,data:d,success:e,dataType:h}}function F(c,d,e,h){var g,k=b.isArray(d),p=b.isPlainObject(d);b.each(d,function(d,r){g=b.type(r);h&&(d=e?h:h+"["+(p||"object"==g||"array"==g?d:"")+"]");!h&&k?c.add(r.name,r.value):"array"==g||!e&&"object"==g?F(c,r,e,d):c.add(d,r)})}var C,k,A=+new Date,O=window.document,P=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,B=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,d="application/json",I="text/html",N=/^\s*$/,w=O.createElement("a");w.href=window.location.href;b.active=0;b.ajaxJSONP=function(c,d){if(!("type"in c))return b.ajax(c);var e,h,g=c.jsonpCallback,k=(b.isFunction(g)?g():g)||"Zepto"+A++,r=O.createElement("script"),n=window[k],m=function(c){b(r).triggerHandler("error",c||"abort")},t={abort:m};return d&&d.promise(t),b(r).on("load error",function(g,m){clearTimeout(h);b(r).off().remove();"error"!=g.type&&e?l(e[0],t,c,d):p(null,m||"error",t,c,d);window[k]=n;e&&b.isFunction(n)&&n(e[0]);n=e=void 0}),!1===u(t,c)?(m("abort"),t):(window[k]=function(){e=arguments},r.src=c.url.replace(/\?(.+)=\?/,"?$1\x3d"+k),O.head.appendChild(r),0<c.timeout&&(h=setTimeout(function(){m("timeout")},c.timeout)),t)};b.ajaxSettings={type:"GET",beforeSend:z,success:z,error:z,complete:z,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:d,xml:"application/xml, text/xml",html:I,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:z};b.ajax=function(c){var d,e,h=b.extend({},c||{}),n=b.Deferred&&b.Deferred();for(C in b.ajaxSettings)void 0===h[C]&&(h[C]=b.ajaxSettings[C]);g(h);h.crossDomain||(d=O.createElement("a"),d.href=h.url,d.href=d.href,h.crossDomain=w.protocol+"//"+w.host!=d.protocol+"//"+d.host);h.url||(h.url=window.location.toString());-1<(e=h.url.indexOf("#"))&&(h.url=h.url.slice(0,e));Q(h);var m=h.dataType;d=/\?.+=\?/.test(h.url);if(d&&(m="jsonp"),!1!==h.cache&&(c&&!0===c.cache||"script"!=m&&"jsonp"!=m)||(h.url=D(h.url,"_\x3d"+Date.now())),"jsonp"==m)return d||(h.url=D(h.url,h.jsonp?h.jsonp+"\x3d?":!1===h.jsonp?"":"callback\x3d?")),b.ajaxJSONP(h,n);var y;c=h.accepts[m];var v={};d=function(b,c){v[b.toLowerCase()]=[b,c]};var E=/^([\w-]+:)\/\//.test(h.url)?RegExp.$1:window.location.protocol,t=h.xhr();e=t.setRequestHeader;if(n&&n.promise(t),h.crossDomain||d("X-Requested-With","XMLHttpRequest"),d("Accept",c||"*/*"),(c=h.mimeType||c)&&(-1<c.indexOf(",")&&(c=c.split(",",2)[0]),t.overrideMimeType&&t.overrideMimeType(c)),(h.contentType||!1!==h.contentType&&h.data&&"GET"!=h.type.toUpperCase())&&d("Content-Type",h.contentType||"application/x-www-form-urlencoded"),h.headers)for(k in h.headers)d(k,h.headers[k]);if(t.setRequestHeader=d,t.onreadystatechange=function(){if(4==t.readyState){t.onreadystatechange=z;clearTimeout(y);var c,d=!1;if(200<=t.status&&300>t.status||304==t.status||0==t.status&&"file:"==E){if(m=m||L(h.mimeType||t.getResponseHeader("content-type")),"arraybuffer"==t.responseType||"blob"==t.responseType)c=t.response;else{c=t.responseText;try{c=h.dataFilter==z?c:h.dataFilter.call(h.context,c,m),"script"==m?(0,eval)(c):"xml"==m?c=t.responseXML:"json"==m&&(c=N.test(c)?null:b.parseJSON(c))}catch(a){d=a}if(d)return p(d,"parsererror",t,h,n)}l(c,t,h,n)}else p(t.statusText||null,t.status?"error":"abort",t,h,n)}},!1===u(t,h))return t.abort(),p(null,"abort",t,h,n),t;if(t.open(h.type,h.url,!("async"in h)||h.async,h.username,h.password),h.xhrFields)for(k in h.xhrFields)t[k]=h.xhrFields[k];for(k in v)e.apply(t,v[k]);return 0<h.timeout&&(y=setTimeout(function(){t.onreadystatechange=z;t.abort();p(null,"timeout",t,h,n)},h.timeout)),t.send(h.data?h.data:null),t};b.get=function(){return b.ajax(E.apply(null,arguments))};b.post=function(){var c=E.apply(null,arguments);return c.type="POST",b.ajax(c)};b.getJSON=function(){var c=E.apply(null,arguments);return c.dataType="json",b.ajax(c)};b.fn.load=function(c,d,e){if(!this.length)return this;var h,g=this,k=c.split(/\s/);c=E(c,d,e);var p=c.success;return 1<k.length&&(c.url=k[0],h=k[1]),c.success=function(c){g.html(h?b("\x3cdiv\x3e").html(c.replace(P,"")).find(h):c);p&&p.apply(g,arguments)},b.ajax(c),this};var n=encodeURIComponent;b.param=function(c,d){var e=[];return e.add=function(c,d){b.isFunction(d)&&(d=d());null==d&&(d="");this.push(n(c)+"\x3d"+n(d))},F(e,c,d),e.join("\x26").replace(/%20/g,"+")}})(g);(function(b){b.fn.serializeArray=function(){var e,g,u=[],l=function(b){return b.forEach?b.forEach(l):void u.push({name:e,value:b})};return this[0]&&b.each(this[0].elements,function(p,m){g=m.type;(e=m.name)&&"fieldset"!=m.nodeName.toLowerCase()&&!m.disabled&&"submit"!=g&&"reset"!=g&&"button"!=g&&"file"!=g&&("radio"!=g&&"checkbox"!=g||m.checked)&&l(b(m).val())}),u};b.fn.serialize=function(){var b=[];return this.serializeArray().forEach(function(e){b.push(encodeURIComponent(e.name)+"\x3d"+encodeURIComponent(e.value))}),b.join("\x26")};b.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var g=b.Event("submit");this.eq(0).trigger(g);g.isDefaultPrevented()||this.get(0).submit()}return this}})(g);(function(){try{getComputedStyle(void 0)}catch(e){var b=getComputedStyle;window.getComputedStyle=function(e,g){try{return b(e,g)}catch(l){return null}}}})();A("zepto",g)});layui.define(["layer-mobile","zepto"],function(A){var g=layui.zepto,b=layui["layer-mobile"],e=(layui.device(),"layui-upload-enter"),y={icon:2,shift:6},u={file:"\u6587\u4ef6",video:"\u89c6\u9891",audio:"\u97f3\u9891"};b.msg=function(e){return b.open({content:e||"",skin:"msg",time:2})};var l=function(b){this.options=b};l.prototype.init=function(){var b=this,m=b.options,l=g("body"),y=g(m.elem||".layui-upload-file"),D=g('\x3ciframe id\x3d"layui-upload-iframe" class\x3d"layui-upload-iframe" name\x3d"layui-upload-iframe"\x3e\x3c/iframe\x3e');return g("#layui-upload-iframe")[0]||l.append(D),y.each(function(p,l){l=g(l);p='\x3cform target\x3d"layui-upload-iframe" method\x3d"'+(m.method||"post")+'" key\x3d"set-mine" enctype\x3d"multipart/form-data" action\x3d"'+(m.url||"")+'"\x3e\x3c/form\x3e';var z=l.attr("lay-type")||m.type;m.unwrap||(p='\x3cdiv class\x3d"layui-box layui-upload-button"\x3e'+p+'\x3cspan class\x3d"layui-upload-icon"\x3e\x3ci class\x3d"layui-icon"\x3e\x26#xe608;\x3c/i\x3e'+(l.attr("lay-title")||m.title||"\u4e0a\u4f20"+(u[z]||"\u56fe\u7247"))+"\x3c/span\x3e\x3c/div\x3e");p=g(p);m.unwrap||p.on("dragover",function(b){b.preventDefault();g(this).addClass(e)}).on("dragleave",function(){g(this).removeClass(e)}).on("drop",function(){g(this).removeClass(e)});"layui-upload-iframe"===l.parent("form").attr("target")&&(m.unwrap?l.unwrap():(l.parent().next().remove(),l.unwrap().unwrap()));l.wrap(p);l.off("change").on("change",function(){b.action(this,z)})})};l.prototype.action=function(e,m){var l=this.options,p=e.value,u=g(e),A=u.attr("lay-ext")||l.ext||"";if(p){switch(m){case "file":if(A&&!RegExp("\\w\\.("+A+")$","i").test(escape(p)))return b.msg("\u4e0d\u652f\u6301\u8be5\u6587\u4ef6\u683c\u5f0f",y),e.value="";break;case "video":if(!RegExp("\\w\\.("+(A||"avi|mp4|wma|rmvb|rm|flash|3gp|flv")+")$","i").test(escape(p)))return b.msg("\u4e0d\u652f\u6301\u8be5\u89c6\u9891\u683c\u5f0f",y),e.value="";break;case "audio":if(!RegExp("\\w\\.("+(A||"mp3|wav|mid")+")$","i").test(escape(p)))return b.msg("\u4e0d\u652f\u6301\u8be5\u97f3\u9891\u683c\u5f0f",y),e.value="";break;default:if(!RegExp("\\w\\.("+(A||"jpg|png|gif|bmp|jpeg")+")$","i").test(escape(p)))return b.msg("\u4e0d\u652f\u6301\u8be5\u56fe\u7247\u683c\u5f0f",y),e.value=""}l.before&&l.before(e);u.parent().submit();var E=g("#layui-upload-iframe"),F=setInterval(function(){var g;try{g=E.contents().find("body").text()}catch(k){b.msg("\u4e0a\u4f20\u63a5\u53e3\u5b58\u5728\u8de8\u57df",y),clearInterval(F)}if(g){clearInterval(F);E.contents().find("body").html("");try{g=JSON.parse(g)}catch(k){return b.msg("\u8bf7\u5bf9\u4e0a\u4f20\u63a5\u53e3\u8fd4\u56deJSON\u5b57\u7b26",y)}"function"==typeof l.success&&l.success(g,e)}},30);e.value=""}};A("upload-mobile",function(b){(new l(b||{})).init()})});layui.define(["laytpl","upload-mobile","layer-mobile","zepto"],function(A){var g=layui.zepto,b=layui.laytpl,e=layui["layer-mobile"],y=layui["upload-mobile"],u=layui.device(),l={},p=function(){this.v="2.1.0";m(g("body"),"*[layim-event]",function(a){var b=g(this),c=b.attr("layim-event");M[c]?M[c].call(this,b,a):""})},m=function(a,b,c){var d,e="function"==typeof b,q=function(a){var b=g(this);b.data("lock")||(d||c.call(this,a),d=!1,b.data("lock","true"),setTimeout(function(){b.removeAttr("data-lock")},b.data("locktime")||0))};return e&&(c=b),a="string"==typeof a?g(a):a,z?void(e?a.on("touchmove",function(){d=!0}).on("touchend",q):a.on("touchmove",b,function(){d=!0}).on("touchend",b,q)):void(e?a.on("click",q):a.on("click",b,q))},z=/Android|iPhone|SymbianOS|Windows Phone|iPad|iPod/.test(navigator.userAgent);e.popBottom=function(a){e.close(e.popBottom.index);e.popBottom.index=e.open(g.extend({type:1,content:a.content||"",shade:!1,className:"layim-layer"},a))};p.prototype.config=function(a){a=a||{};a=g.extend({title:"\u6211\u7684IM",isgroup:0,isNewFriend:!0,voice:"default.mp3",chatTitleColor:"#36373C"},a);J(a)};p.prototype.on=function(a,b){return"function"==typeof b&&(l[a]?l[a].push(b):l[a]=[b]),this};p.prototype.chat=function(a){if(window.JSON&&window.JSON.parse)return B(a,-1),this};p.prototype.panel=function(a){return P(a)};p.prototype.cache=function(){return k};p.prototype.getMessage=function(a){return r(a),this};p.prototype.addList=function(a){return V(a),this};p.prototype.removeList=function(a){return T(a),this};p.prototype.setFriendStatus=function(a,b){g(".layim-friend"+a)["online"===b?"removeClass":"addClass"]("layim-list-gray")};p.prototype.setChatStatus=function(a){return d().elem.find(".layim-chat-status").html(a),this};p.prototype.showNew=function(a,b){w(a,b)};p.prototype.content=function(a){return layui.data.content(a)};var L=function(a){return a=a||{},"history"===a.type&&(a.item=a.item||"d.sortHistory"),["{{# var length \x3d 0; layui.each("+a.item+", function(i, data){ length++; }}",'\x3cli layim-event\x3d"chat" data-type\x3d"'+a.type+'" data-index\x3d"'+(a.index?"{{"+a.index+"}}":("history"===a.type?"{{data.type}}":a.type)+"{{data.id}}")+'" class\x3d"layim-'+("history"===a.type?"{{data.type}}":a.type)+'{{data.id}} {{ data.status \x3d\x3d\x3d "offline" ? "layim-list-gray" : "" }}"\x3e\x3cdiv\x3e\x3cimg src\x3d"{{data.avatar}}"\x3e\x3c/div\x3e\x3cspan\x3e{{ data.username||data.groupname||data.name||"\u4f5a\u540d" }}\x3c/span\x3e\x3cp\x3e{{ data.remark||data.sign||"" }}\x3c/p\x3e\x3cspan class\x3d"layim-msg-status"\x3enew\x3c/span\x3e\x3c/li\x3e',"{{# }); if(length \x3d\x3d\x3d 0){ }}",'\x3cli class\x3d"layim-null"\x3e'+({friend:"\u8be5\u5206\u7ec4\u4e0b\u6682\u65e0\u597d\u53cb",group:"\u6682\u65e0\u7fa4\u7ec4",history:"\u6682\u65e0\u4efb\u4f55\u6d88\u606f"}[a.type]||"\u6682\u65e0\u6570\u636e")+"\x3c/li\x3e","{{# } }}"].join("")},D=function(a,b,c){return['\x3cdiv class\x3d"layim-panel'+(b?" layui-m-anim-left":"")+'"\x3e','\x3cdiv class\x3d"layim-title" style\x3d"background-color: {{d.base.chatTitleColor}};"\x3e\x3cp\x3e',c?'\x3ci class\x3d"layui-icon layim-chat-back" layim-event\x3d"back"\x3e\x26#xe603;\x3c/i\x3e':"",'{{ d.title || d.base.title }}\x3cspan class\x3d"layim-chat-status"\x3e\x3c/span\x3e{{# if(d.data){ }}{{# if(d.data.type \x3d\x3d\x3d "group"){ }}\x3ci class\x3d"layui-icon layim-chat-detail" layim-event\x3d"detail"\x3e\x26#xe613;\x3c/i\x3e{{# } }}{{# } }}\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"layui-unselect layim-content"\x3e',a,"\x3c/div\x3e\x3c/div\x3e"].join("")},Q=['\x3cdiv class\x3d"layui-layim"\x3e\x3cdiv class\x3d"layim-tab-content layui-show"\x3e\x3cul class\x3d"layim-list-friend"\x3e\x3cul class\x3d"layui-layim-list layui-show layim-list-history"\x3e',L({type:"history"}),'\x3c/ul\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"layim-tab-content"\x3e\x3cul class\x3d"layim-list-top"\x3e{{# if(d.base.isNewFriend){ }}\x3cli layim-event\x3d"newFriend"\x3e\x3ci class\x3d"layui-icon"\x3e\x26#xe654;\x3c/i\x3e\u65b0\u7684\u670b\u53cb\x3ci class\x3d"layim-new" id\x3d"LAY_layimNewFriend"\x3e\x3c/i\x3e\x3c/li\x3e{{# } if(d.base.isgroup){ }}\x3cli layim-event\x3d"group"\x3e\x3ci class\x3d"layui-icon"\x3e\x26#xe613;\x3c/i\x3e\u7fa4\u804a\x3ci class\x3d"layim-new" id\x3d"LAY_layimNewGroup"\x3e\x3c/i\x3e\x3c/li\x3e{{# } }}\x3c/ul\x3e\x3cul class\x3d"layim-list-friend"\x3e{{# layui.each(d.friend, function(index, item){ var spread \x3d d.local["spread"+index]; }}\x3cli\x3e\x3ch5 layim-event\x3d"spread" lay-type\x3d"{{ spread }}"\x3e\x3ci class\x3d"layui-icon"\x3e{{# if(spread \x3d\x3d\x3d "true"){ }}\x26#xe61a;{{# } else {  }}\x26#xe602;{{# } }}\x3c/i\x3e\x3cspan\x3e{{ item.groupname||"\u672a\u547d\u540d\u5206\u7ec4"+index }}\x3c/span\x3e\x3cem\x3e(\x3ccite class\x3d"layim-count"\x3e {{ (item.list||[]).length }}\x3c/cite\x3e)\x3c/em\x3e\x3c/h5\x3e\x3cul class\x3d"layui-layim-list {{# if(spread \x3d\x3d\x3d "true"){ }} layui-show{{# } }}"\x3e',L({type:"friend",item:"item.list",index:"index"}),'\x3c/ul\x3e\x3c/li\x3e{{# }); if(d.friend.length \x3d\x3d\x3d 0){ }}\x3cli\x3e\x3cul class\x3d"layui-layim-list layui-show"\x3e\x3cli class\x3d"layim-null"\x3e\u6682\u65e0\u8054\u7cfb\u4eba\x3c/li\x3e\x3c/ul\x3e{{# } }}\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"layim-tab-content"\x3e\x3cul class\x3d"layim-list-top"\x3e{{# layui.each(d.base.moreList, function(index, item){ }}\x3cli layim-event\x3d"moreList" lay-filter\x3d"{{ item.alias }}"\x3e\x3ci class\x3d"layui-icon {{item.iconClass||""}}"\x3e{{item.iconUnicode||""}}\x3c/i\x3e{{item.title}}\x3ci class\x3d"layim-new" id\x3d"LAY_layimNew{{ item.alias }}"\x3e\x3c/i\x3e\x3c/li\x3e{{# }); if(!d.base.copyright){ }}\x3cli layim-event\x3d"about"\x3e\x3ci class\x3d"layui-icon"\x3e\x26#xe60b;\x3c/i\x3e\u5173\u4e8e\x3ci class\x3d"layim-new" id\x3d"LAY_layimNewAbout"\x3e\x3c/i\x3e\x3c/li\x3e{{# } }}\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cul class\x3d"layui-unselect layui-layim-tab"\x3e\x3cli title\x3d"\u6d88\u606f" layim-event\x3d"tab" lay-type\x3d"message" class\x3d"layim-this"\x3e\x3ci class\x3d"layui-icon"\x3e\x26#xe611;\x3c/i\x3e\x3cspan\x3e\u6d88\u606f\x3c/span\x3e\x3ci class\x3d"layim-new" id\x3d"LAY_layimNewMsg"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli title\x3d"\u8054\u7cfb\u4eba" layim-event\x3d"tab" lay-type\x3d"friend"\x3e\x3ci class\x3d"layui-icon"\x3e\x26#xe612;\x3c/i\x3e\x3cspan\x3e\u8054\u7cfb\u4eba\x3c/span\x3e\x3ci class\x3d"layim-new" id\x3d"LAY_layimNewList"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli title\x3d"\u66f4\u591a" layim-event\x3d"tab" lay-type\x3d"more"\x3e\x3ci class\x3d"layui-icon"\x3e\x26#xe670;\x3c/i\x3e\x3cspan\x3e\u66f4\u591a\x3c/span\x3e\x3ci class\x3d"layim-new" id\x3d"LAY_layimNewMore"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e'].join(""),E=function(a){return 10>a?"0"+(0|a):a};layui.data.date=function(a){a=new Date(a||new Date);return E(a.getMonth()+1)+"-"+E(a.getDate())+" "+E(a.getHours())+":"+E(a.getMinutes())};layui.data.content=function(a){var b=function(a){return new RegExp("\\n*\\["+(a||"")+"(pre|div|p|table|thead|th|tbody|tr|td|ul|li|ol|li|dl|dt|dd|h2|h3|h4|h5)([\\s\\S]*?)\\]\\n*","g")};return a=(a||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/'/g,"\x26#39;").replace(/"/g,"\x26quot;").replace(/@(\S+)(\s+?|$)/g,'@\x3ca href\x3d"javascript:;"\x3e$1\x3c/a\x3e$2').replace(/face\[([^\s\[\]]+?)\]/g,function(a){a=a.replace(/^face/g,"");return'\x3cimg alt\x3d"'+a+'" title\x3d"'+a+'" src\x3d"'+X[a]+'"\x3e'}).replace(/img\[([^\s]+?)\]/g,function(a){return'\x3cimg class\x3d"layui-layim-photos" src\x3d"'+a.replace(/(^img\[)|(\]$)/g,"")+'"\x3e'}).replace(/file\([\s\S]+?\)\[[\s\S]*?\]/g,function(a){var b=(a.match(/file\(([\s\S]+?)\)\[/)||[])[1],c=(a.match(/\)\[([\s\S]*?)\]/)||[])[1];return b?'\x3ca class\x3d"layui-layim-file" href\x3d"'+b+'" download target\x3d"_blank"\x3e\x3ci class\x3d"layui-icon"\x3e\x26#xe61e;\x3c/i\x3e\x3ccite\x3e'+(c||b)+"\x3c/cite\x3e\x3c/a\x3e":a}).replace(/audio\[([^\s]+?)\]/g,function(a){return'\x3cdiv class\x3d"layui-unselect layui-layim-audio" layim-event\x3d"playAudio" data-src\x3d"'+a.replace(/(^audio\[)|(\]$)/g,"")+'"\x3e\x3ci class\x3d"layui-icon"\x3e\x26#xe652;\x3c/i\x3e\x3cp\x3e\u97f3\u9891\u6d88\u606f\x3c/p\x3e\x3c/div\x3e'}).replace(/video\[([^\s]+?)\]/g,function(a){return'\x3cdiv class\x3d"layui-unselect layui-layim-video" layim-event\x3d"playVideo" data-src\x3d"'+a.replace(/(^video\[)|(\]$)/g,"")+'"\x3e\x3ci class\x3d"layui-icon"\x3e\x26#xe652;\x3c/i\x3e\x3c/div\x3e'}).replace(/a\([\s\S]+?\)\[[\s\S]*?\]/g,function(a){var b=(a.match(/a\(([\s\S]+?)\)\[/)||[])[1],c=(a.match(/\)\[([\s\S]*?)\]/)||[])[1];return b?'\x3ca href\x3d"'+b+'" target\x3d"_blank"\x3e'+(c||b)+"\x3c/a\x3e":a}).replace(b(),"\x3c$1 $2\x3e").replace(b("/"),"\x3c/$1\x3e").replace(/\n/g,"\x3cbr\x3e")};var F,C,k={message:{},chat:[]},J=function(a){var c=a.init||{};return mine=c.mine||{},local=layui.data("layim-mobile")[mine.id]||{},obj={base:a,local:local,mine:mine,history:local.history||[]},create=function(c){var d=c.mine||{},e=layui.data("layim-mobile")[d.id]||{},q={base:a,local:e,mine:d,friend:c.friend||[],group:c.group||[],history:e.history||[]};q.sortHistory=I(q.history,"historyTime");k=g.extend(k,q);O(b(D(Q)).render(q));layui.each(l.ready,function(a,b){b&&b(q)})},k=g.extend(k,obj),a.brief?layui.each(l.ready,function(a,b){b&&b(obj)}):void create(c)},O=function(a){return e.open({type:1,shade:!1,shadeClose:!1,anim:-1,content:a,success:function(a){F=g(a);v(F.find(".layui-layim"));k.base.tabIndex&&M.tab(g(".layui-layim-tab\x3eli").eq(k.base.tabIndex))}})},P=function(a,c){a=a||{};var d=g.extend({},k,{title:a.title||"",data:a.data});return e.open({type:1,shade:!1,shadeClose:!1,anim:-1,content:b(D(a.tpl,-1!==c,!0)).render(d),success:function(b){var c=g(b);c.prev().find(".layim-panel").addClass("layui-m-anim-lout");a.success&&a.success(b);a.isChat||v(c.find(".layim-content"))},end:a.end})},B=function(a,b,c){return a=a||{},a.id?(e.close(B.index),B.index=P({tpl:'\x3cdiv class\x3d"layim-chat layim-chat-{{d.data.type}}"\x3e\x3cdiv class\x3d"layim-chat-main"\x3e\x3cul\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"layim-chat-footer"\x3e\x3cdiv class\x3d"layim-chat-send"\x3e\x3cinput type\x3d"text" autocomplete\x3d"off"\x3e\x3cbutton class\x3d"layim-send layui-disabled" layim-event\x3d"send"\x3e\u53d1\u9001\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"layim-chat-tool" data-json\x3d"{{encodeURIComponent(JSON.stringify(d.data))}}"\x3e\x3cspan class\x3d"layui-icon layim-tool-face" title\x3d"\u9009\u62e9\u8868\u60c5" layim-event\x3d"face"\x3e\x26#xe60c;\x3c/span\x3e{{# if(d.base \x26\x26 d.base.uploadImage){ }}\x3cspan class\x3d"layui-icon layim-tool-image" title\x3d"\u4e0a\u4f20\u56fe\u7247" layim-event\x3d"image"\x3e\x26#xe60d;\x3cinput type\x3d"file" name\x3d"file" accept\x3d"image/*"\x3e\x3c/span\x3e{{# }; }}{{# if(d.base \x26\x26 d.base.uploadFile){ }}\x3cspan class\x3d"layui-icon layim-tool-image" title\x3d"\u53d1\u9001\u6587\u4ef6" layim-event\x3d"image" data-type\x3d"file"\x3e\x26#xe61d;\x3cinput type\x3d"file" name\x3d"file"\x3e\x3c/span\x3e{{# }; }}{{# layui.each(d.base.tool, function(index, item){ }}\x3cspan class\x3d"layui-icon  {{item.iconClass||""}} layim-tool-{{item.alias}}" title\x3d"{{item.title}}" layim-event\x3d"extend" lay-filter\x3d"{{ item.alias }}"\x3e{{item.iconUnicode||""}}\x3c/span\x3e{{# }); }}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',data:a,title:a.name,isChat:!0,success:function(b){C=g(b);W();h();delete k.message[a.type+a.id];w("Msg");var c=d(),e=c.elem.find(".layim-chat-main");layui.each(l.chatChange,function(a,b){b&&b(c)});v(e);c.textarea.on("focus",function(){setTimeout(function(){e.scrollTop(e[0].scrollHeight+1E3)},500)})},end:function(){C=null;n.time=0}},b)):e.msg("\u975e\u6cd5\u7528\u6237")},v=function(a){u.ios&&a.on("touchmove",function(b){var c=a.scrollTop();0>=c&&(a.scrollTop(1),b.preventDefault(b));0>=this.scrollHeight-c-a.height()&&(a.scrollTop(a.scrollTop()-1),b.preventDefault(b))})},d=function(){if(!C)return{};var a=C.find(".layim-chat"),b=JSON.parse(decodeURIComponent(a.find(".layim-chat-tool").data("json")));return{elem:a,data:b,textarea:a.find("input")}},I=function(a,b,c){var d=[];return layui.each(a,function(a,b){d.push(b)}),d.sort(function(a,c){a=a[b];c=c[b];return c<a?-1:c>a?1:0}),c&&d.reverse(),d},N=function(a){var c=layui.data("layim-mobile")[k.mine.id]||{},d={},e=c.history||{};e[a.type+a.id];if(F){var g=F.find(".layim-list-history");a.historyTime=(new Date).getTime();a.sign=a.content;e[a.type+a.id]=a;c.history=e;layui.data("layim-mobile",{key:k.mine.id,value:c});var h=g.find(".layim-"+a.type+a.id),l=(k.message[a.type+a.id]||[]).length,c=function(){h=g.find(".layim-"+a.type+a.id);h.find("p").html(a.content);0<l&&h.find(".layim-msg-status").html(l).addClass("layui-show")};0<h.length?(c(),g.prepend(h.clone()),h.remove()):(d[a.type+a.id]=a,d=b(L({type:"history",item:"d.data"})).render({data:d}),g.prepend(d),c(),g.find(".layim-null").remove());w("Msg")}},w=function(a,b){b||layui.each(k.message,function(){return b=!0,!1});g("#LAY_layimNew"+a)[b?"addClass":"removeClass"]("layui-show")},n=function(){var a={username:k.mine?k.mine.username:"\u8bbf\u5ba2",avatar:k.mine?k.mine.avatar:layui.cache.dir+"css/pc/layim/skin/logo.jpg",id:k.mine?k.mine.id:null,mine:!0},c=d(),g=c.elem.find(".layim-chat-main ul"),h=c.data,m=k.base.maxLength||3E3,p=(new Date).getTime(),c=c.textarea;if(a.content=c.val(),""!==a.content){if(a.content.length>m)return e.msg("\u5185\u5bb9\u6700\u957f\u4e0d\u80fd\u8d85\u8fc7"+m+"\u4e2a\u5b57\u7b26");6E4<p-(n.time||0)&&(g.append('\x3cli class\x3d"layim-chat-system"\x3e\x3cspan\x3e'+layui.data.date()+"\x3c/span\x3e\x3c/li\x3e"),n.time=p);g.append(b('\x3cli class\x3d"layim-chat-li{{ d.mine ? " layim-chat-mine" : "" }}"\x3e\x3cdiv class\x3d"layim-chat-user"\x3e\x3cimg src\x3d"{{ d.avatar }}"\x3e\x3ccite\x3e{{ d.username||"\u4f5a\u540d" }}\x3c/cite\x3e\x3c/div\x3e\x3cdiv class\x3d"layim-chat-text"\x3e{{ layui.data.content(d.content||"\x26nbsp;") }}\x3c/div\x3e\x3c/li\x3e').render(a));var r={mine:a,to:h};H({username:r.mine.username,avatar:r.mine.avatar,id:h.id,type:h.type,content:r.mine.content,timestamp:p,mine:!0});layui.each(l.sendMessage,function(a,b){b&&b(r)});h.content=a.content;N(h);U();c.val("");c.next().addClass("layui-disabled")}},c=function(){var a=document.createElement("audio");a.src=layui.cache.dir+"css/modules/layim/voice/"+k.base.voice;a.play()},r=function(a){a=a||{};var e,h=d().data||{},h=h.id==a.id&&h.type==a.type;a.timestamp=a.timestamp||(new Date).getTime();a.system||H(a);JSON.parse(JSON.stringify(a));k.base.voice&&c();(!C&&a.content||!h)&&(k.message[a.type+a.id]?k.message[a.type+a.id].push(a):k.message[a.type+a.id]=[a]);e=void 0;if("friend"===a.type){var l;layui.each(k.friend,function(b,c){if(layui.each(c.list,function(b,c){if(c.id==a.id)return a.type="friend",a.name=c.username,l=!0}),l)return!0});l||(a.temporary=!0)}else"group"===a.type?layui.each(k.group,function(b,c){if(c.id==a.id)return a.type="group",a.name=a.groupname=c.groupname,e=c.avatar,!0}):a.name=a.name||a.username||a.groupname;var m=g.extend({},a,{avatar:e||a.avatar});if("group"===a.type&&delete m.username,N(m),C&&h)h=C.find(".layim-chat").find(".layim-chat-main ul"),a.system?h.append('\x3cli class\x3d"layim-chat-system"\x3e\x3cspan\x3e'+a.content+"\x3c/span\x3e\x3c/li\x3e"):""!==a.content.replace(/\s/g,"")&&(6E4<a.timestamp-(n.time||0)&&(h.append('\x3cli class\x3d"layim-chat-system"\x3e\x3cspan\x3e'+layui.data.date(a.timestamp)+"\x3c/span\x3e\x3c/li\x3e"),n.time=a.timestamp),h.append(b('\x3cli class\x3d"layim-chat-li{{ d.mine ? " layim-chat-mine" : "" }}"\x3e\x3cdiv class\x3d"layim-chat-user"\x3e\x3cimg src\x3d"{{ d.avatar }}"\x3e\x3ccite\x3e{{ d.username||"\u4f5a\u540d" }}\x3c/cite\x3e\x3c/div\x3e\x3cdiv class\x3d"layim-chat-text"\x3e{{ layui.data.content(d.content||"\x26nbsp;") }}\x3c/div\x3e\x3c/li\x3e').render(a))),U()},H=function(a){var b=layui.data("layim-mobile")[k.mine.id]||{},c=b.chatlog||{};c[a.type+a.id]?(c[a.type+a.id].push(a),20<c[a.type+a.id].length&&c[a.type+a.id].shift()):c[a.type+a.id]=[a];b.chatlog=c;layui.data("layim-mobile",{key:k.mine.id,value:b})},h=function(){var a=layui.data("layim-mobile")[k.mine.id]||{},c=d(),a=a.chatlog||{},e=c.elem.find(".layim-chat-main ul");layui.each(a[c.data.type+c.data.id],function(a,c){(new Date).getTime()>c.timestamp&&6E4<c.timestamp-(n.time||0)&&(e.append('\x3cli class\x3d"layim-chat-system"\x3e\x3cspan\x3e'+layui.data.date(c.timestamp)+"\x3c/span\x3e\x3c/li\x3e"),n.time=c.timestamp);e.append(b('\x3cli class\x3d"layim-chat-li{{ d.mine ? " layim-chat-mine" : "" }}"\x3e\x3cdiv class\x3d"layim-chat-user"\x3e\x3cimg src\x3d"{{ d.avatar }}"\x3e\x3ccite\x3e{{ d.username||"\u4f5a\u540d" }}\x3c/cite\x3e\x3c/div\x3e\x3cdiv class\x3d"layim-chat-text"\x3e{{ layui.data.content(d.content||"\x26nbsp;") }}\x3c/div\x3e\x3c/li\x3e').render(c))});U()},V=function(a){var c,d={},g=F.find(".layim-list-"+a.type);if(k[a.type])if("friend"===a.type)layui.each(k.friend,function(b,g){if(a.groupid==g.id)return layui.each(k.friend[b].list,function(b,d){if(d.id==a.id)return c=!0}),c?e.msg("\u597d\u53cb ["+(a.username||"")+"] \u5df2\u7ecf\u5b58\u5728\u5217\u8868\u4e2d",{anim:6}):(k.friend[b].list=k.friend[b].list||[],d[k.friend[b].list.length]=a,a.groupIndex=b,k.friend[b].list.push(a),!0)});else if("group"===a.type){if(layui.each(k.group,function(b,d){if(d.id==a.id)return c=!0}),c)return e.msg("\u60a8\u5df2\u662f ["+(a.groupname||"")+"] \u7684\u7fa4\u6210\u5458",{anim:6});d[k.group.length]=a;k.group.push(a)}if(!c){var h=b(L({type:a.type,item:"d.data",index:"friend"===a.type?"data.groupIndex":null})).render({data:d});"friend"===a.type?(g=g.children("li").eq(a.groupIndex),g.find(".layui-layim-list").append(h),g.find(".layim-count").html(k.friend[a.groupIndex].list.length),g.find(".layim-null")[0]&&g.find(".layim-null").remove()):"group"===a.type&&(g.append(h),g.find(".layim-null")[0]&&g.find(".layim-null").remove())}},T=function(a){var b=F.find(".layim-list-"+a.type);k[a.type]&&("friend"===a.type?layui.each(k.friend,function(c,d){layui.each(d.list,function(d,e){if(a.id==e.id)return e=b.children("li").eq(c),e.find(".layui-layim-list").children("li"),e.find(".layui-layim-list").children("li").eq(d).remove(),k.friend[c].list.splice(d,1),e.find(".layim-count").html(k.friend[c].list.length),0===k.friend[c].list.length&&e.find(".layui-layim-list").html('\x3cli class\x3d"layim-null"\x3e\u8be5\u5206\u7ec4\u4e0b\u5df2\u65e0\u597d\u53cb\u4e86\x3c/li\x3e'),!0})}):"group"===a.type&&layui.each(k.group,function(c,d){if(a.id==d.id)return b.children("li").eq(c).remove(),k.group.splice(c,1),0===k.group.length&&b.html('\x3cli class\x3d"layim-null"\x3e\u6682\u65e0\u7fa4\u7ec4\x3c/li\x3e'),!0}))},U=function(){var a=d().elem.find(".layim-chat-main"),b=a.find("ul"),c=b.children(".layim-chat-li");20<=c.length&&(c=c.eq(0),c.prev().remove(),b.prev().hasClass("layim-chat-system")||b.before('\x3cdiv class\x3d"layim-chat-system"\x3e\x3cspan layim-event\x3d"chatLog"\x3e\u67e5\u770b\u66f4\u591a\u8bb0\u5f55\x3c/span\x3e\x3c/div\x3e'),c.remove());a.scrollTop(a[0].scrollHeight+1E3)},W=function(){var a=d().textarea,b=a.next();a.off("keyup").on("keyup",function(c){13===c.keyCode&&(c.preventDefault(),n());b[""===a.val()?"addClass":"removeClass"]("layui-disabled")})},X=function(){var a={};return layui.each("[\u5fae\u7b11] [\u563b\u563b] [\u54c8\u54c8] [\u53ef\u7231] [\u53ef\u601c] [\u6316\u9f3b] [\u5403\u60ca] [\u5bb3\u7f9e] [\u6324\u773c] [\u95ed\u5634] [\u9119\u89c6] [\u7231\u4f60] [\u6cea] [\u5077\u7b11] [\u4eb2\u4eb2] [\u751f\u75c5] [\u592a\u5f00\u5fc3] [\u767d\u773c] [\u53f3\u54fc\u54fc] [\u5de6\u54fc\u54fc] [\u5618] [\u8870] [\u59d4\u5c48] [\u5410] [\u54c8\u6b20] [\u62b1\u62b1] [\u6012] [\u7591\u95ee] [\u998b\u5634] [\u62dc\u62dc] [\u601d\u8003] [\u6c57] [\u56f0] [\u7761] [\u94b1] [\u5931\u671b] [\u9177] [\u8272] [\u54fc] [\u9f13\u638c] [\u6655] [\u60b2\u4f24] [\u6293\u72c2] [\u9ed1\u7ebf] [\u9634\u9669] [\u6012\u9a82] [\u4e92\u7c89] [\u5fc3] [\u4f24\u5fc3] [\u732a\u5934] [\u718a\u732b] [\u5154\u5b50] [ok] [\u8036] [good] [NO] [\u8d5e] [\u6765] [\u5f31] [\u8349\u6ce5\u9a6c] [\u795e\u9a6c] [\u56e7] [\u6d6e\u4e91] [\u7ed9\u529b] [\u56f4\u89c2] [\u5a01\u6b66] [\u5965\u7279\u66fc] [\u793c\u7269] [\u949f] [\u8bdd\u7b52] [\u8721\u70db] [\u86cb\u7cd5]".split(" "),function(b,c){a[c]=layui.cache.dir+"images/face/"+b+".gif"}),a}(),t=layui.stope,R=function(a,b,c){var d,e=a.value;c||a.focus();document.selection?(d=document.selection.createRange(),document.selection.empty(),d.text=b):(d=[e.substring(0,a.selectionStart),b,e.substr(a.selectionEnd)],c||a.focus(),a.value=d.join(""))},M={chat:function(a){var b=layui.data("layim-mobile")[k.mine.id]||{},c=a.data("type"),d=a.data("index");a=a.attr("data-list")||a.index();var e={};"friend"===c?e=k[c][d].list[a]:"group"===c?e=k[c][a]:"history"===c&&(e=(b.history||{})[d]||{});e.name=e.name||e.username||e.groupname;"history"!==c&&(e.type=c);B(e,!0);g(".layim-"+e.type+e.id).find(".layim-msg-status").removeClass("layui-show")},spread:function(a){var b=a.attr("lay-type"),c="true"===b?"false":"true",d=layui.data("layim-mobile")[k.mine.id]||{};a.next()["true"===b?"removeClass":"addClass"]("layui-show");d["spread"+a.parent().index()]=c;layui.data("layim-mobile",{key:k.mine.id,value:d});a.attr("lay-type",c);a.find(".layui-icon").html("true"===c?"\x26#xe61a;":"\x26#xe602;")},tab:function(a){var b=a.index();a.addClass("layim-this").siblings().removeClass("layim-this");F.find(".layim-tab-content").eq(b).addClass("layui-show").siblings(".layim-tab-content").removeClass("layui-show")},back:function(a){var b=a.parents(".layui-m-layer").eq(0),c=b.attr("index");setTimeout(function(){e.close(c)},300);a.parents(".layim-panel").eq(0).removeClass("layui-m-anim-left").addClass("layui-m-anim-rout");b.prev().find(".layim-panel").eq(0).removeClass("layui-m-anim-lout").addClass("layui-m-anim-right");layui.each(l.back,function(a,b){setTimeout(function(){b&&b()},200)})},send:function(){n()},face:function(a,b){var c="",h=d().textarea;layui.each(X,function(a,b){c+='\x3cli title\x3d"'+a+'"\x3e\x3cimg src\x3d"'+b+'"\x3e\x3c/li\x3e'});c='\x3cul class\x3d"layui-layim-face"\x3e'+c+"\x3c/ul\x3e";e.popBottom({content:c,success:function(a){a=g(a).find(".layui-layim-face").children("li");m(a,function(){return R(h[0],"face"+this.title+" ",!0),h.next()[""===h.val()?"addClass":"removeClass"]("layui-disabled"),!1})}});a=g(document);z?a.off("touchend",M.faceHide).on("touchend",M.faceHide):a.off("click",M.faceHide).on("click",M.faceHide);t(b)},faceHide:function(){e.close(e.popBottom.index);g(document).off("touchend",M.faceHide).off("click",M.faceHide)},image:function(a){var b=a.data("type")||"images",c=d(),g=k.base[{images:"uploadImage",file:"uploadFile"}[b]]||{};y({url:g.url||"",method:g.type,elem:a.find("input")[0],unwrap:!0,type:b,success:function(a){0==a.code?(a.data=a.data||{},"images"===b?R(c.textarea[0],"img["+(a.data.src||"")+"]"):"file"===b&&R(c.textarea[0],"file("+(a.data.src||"")+")["+(a.data.name||"\u4e0b\u8f7d\u6587\u4ef6")+"]"),n()):e.msg(a.msg||"\u4e0a\u4f20\u5931\u8d25")}})},extend:function(a){var b=a.attr("lay-filter"),c=d();layui.each(l["tool("+b+")"],function(b,d){d&&d.call(a,function(a){R(c.textarea[0],a)},n,c)})},newFriend:function(){layui.each(l.newFriend,function(a,b){b&&b()})},group:function(){P({title:"\u7fa4\u804a",tpl:['\x3cdiv class\x3d"layui-layim-list layim-list-group"\x3e',L({type:"group",item:"d.group"}),"\x3c/div\x3e"].join(""),data:{}})},detail:function(){var a=d();layui.each(l.detail,function(b,c){c&&c(a.data)})},playAudio:function(a){var b=a.data("audio"),c=b||document.createElement("audio"),d=function(){c.pause();a.removeAttr("status");a.find("i").html("\x26#xe652;")};return a.data("error")?e.msg("\u64ad\u653e\u97f3\u9891\u6e90\u5f02\u5e38"):c.play?void(a.attr("status")?d():(b||(c.src=a.data("src")),c.play(),a.attr("status","pause"),a.data("audio",c),a.find("i").html("\x26#xe651;"),c.onended=function(){d()},c.onerror=function(){e.msg("\u64ad\u653e\u97f3\u9891\u6e90\u5f02\u5e38");a.data("error",!0);d()})):e.msg("\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301audio")},playVideo:function(a){a=a.data("src");return document.createElement("video").play?(e.close(M.playVideo.index),void(M.playVideo.index=e.open({type:1,anim:!1,style:"width: 100%; height: 50%;",content:'\x3cdiv style\x3d"background-color: #000; height: 100%;"\x3e\x3cvideo style\x3d"position: absolute; width: 100%; height: 100%;" src\x3d"'+a+'" autoplay\x3d"autoplay"\x3e\x3c/video\x3e\x3c/div\x3e'}))):e.msg("\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301video")},chatLog:function(a){var b=d();layui.each(l.chatlog,function(a,c){c&&c(b.data,b.elem.find(".layim-chat-main\x3eul"))})},moreList:function(a){var b=a.attr("lay-filter");layui.each(l.moreList,function(a,c){c&&c({alias:b})})},about:function(){e.open({content:'\x3cp style\x3d"padding-bottom: 5px;"\x3eLayIM\u5c5e\u4e8e\u4ed8\u8d39\u4ea7\u54c1\uff0c\u6b22\u8fce\u901a\u8fc7\u5b98\u7f51\u83b7\u5f97\u6388\u6743\uff0c\u4fc3\u8fdb\u826f\u6027\u53d1\u5c55\uff01\x3c/p\x3e\x3cp\x3e\u5f53\u524d\u7248\u672c\uff1alayim mobile v2.1.0\x3c/p\x3e\x3cp\x3e\u7248\u6743\u6240\u6709\uff1a\x3ca href\x3d"http://layim.layui.com" target\x3d"_blank"\x3elayim.layui.com\x3c/a\x3e\x3c/p\x3e',className:"layim-about",shadeClose:!1,btn:"\u6211\u77e5\u9053\u4e86"})}};A("layim-mobile",new p)}).addcss("modules/layim/mobile/layim.css?v\x3d2.10","skinlayim-mobilecss");layui["layui.mobile"]||layui.config({base:layui.cache.dir+"lay/modules/mobile/"}).extend({"layer-mobile":"layer-mobile",zepto:"zepto","upload-mobile":"upload-mobile","layim-mobile":"layim-mobile"});layui.define(["layer-mobile","zepto","layim-mobile"],function(A){A("mobile",{layer:layui["layer-mobile"],layim:layui["layim-mobile"]})});